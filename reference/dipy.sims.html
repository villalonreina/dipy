<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dipy &mdash; dipy 0.10.0dev documentation</title>
    
    <link rel="stylesheet" href="../_static/dipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.10.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="dipy 0.10.0dev documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="index.html" />
    <link rel="next" title="tracking" href="dipy.tracking.html" />
  <meta name="keywords" content="dipy, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  <body>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <a href="../index.html">
  <img src="../_static/dipy-banner.png" alt="dipy logo"  border="0" />
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dipy.tracking.html" title="tracking"
             accesskey="N">next</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">API Reference</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">

  
<h4> Site Navigation </h4>
  <ul>
    <li><a href="../documentation.html">Documentation</a></li>
    <li><a href="../devel/index.html">Development</a></li>
  </ul>

<h4> NIPY Community </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://nipy.org/">Community Home</a></li>
    <li><a class="reference external"
	href="http://nipy.org/software/projects/">NIPY Projects</a></li>
    <li><a class="reference external"
	href="http://mail.scipy.org/mailman/listinfo/nipy-devel">Mailing List</a></li>
    <li><a class="reference external"
	href="http://nipy.org/software/license/index.html">License</a></li>
  </ul>


  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">sims</span></tt></a><ul>
<li><a class="reference internal" href="#module-dipy.sims.phantom">Module: <tt class="docutils literal"><span class="pre">sims.phantom</span></tt></a></li>
<li><a class="reference internal" href="#module-dipy.sims.voxel">Module: <tt class="docutils literal"><span class="pre">sims.voxel</span></tt></a><ul>
<li><a class="reference internal" href="#singletensor">SingleTensor</a></li>
<li><a class="reference internal" href="#add-noise">add_noise</a></li>
<li><a class="reference internal" href="#diff2eigenvectors">diff2eigenvectors</a></li>
<li><a class="reference internal" href="#get-data">get_data</a></li>
<li><a class="reference internal" href="#gradient-table">gradient_table</a></li>
<li><a class="reference internal" href="#orbital-phantom">orbital_phantom</a></li>
<li><a class="reference internal" href="#vec2vec-rotmat">vec2vec_rotmat</a></li>
<li><a class="reference internal" href="#multitensor">MultiTensor</a></li>
<li><a class="reference internal" href="#id7">SingleTensor</a></li>
<li><a class="reference internal" href="#sticksandball">SticksAndBall</a></li>
<li><a class="reference internal" href="#id11">add_noise</a></li>
<li><a class="reference internal" href="#all-tensor-evecs">all_tensor_evecs</a></li>
<li><a class="reference internal" href="#dot">dot</a></li>
<li><a class="reference internal" href="#multi-tensor">multi_tensor</a></li>
<li><a class="reference internal" href="#multi-tensor-msd">multi_tensor_msd</a></li>
<li><a class="reference internal" href="#multi-tensor-odf">multi_tensor_odf</a></li>
<li><a class="reference internal" href="#multi-tensor-pdf">multi_tensor_pdf</a></li>
<li><a class="reference internal" href="#multi-tensor-rtop">multi_tensor_rtop</a></li>
<li><a class="reference internal" href="#single-tensor">single_tensor</a></li>
<li><a class="reference internal" href="#single-tensor-msd">single_tensor_msd</a></li>
<li><a class="reference internal" href="#single-tensor-odf">single_tensor_odf</a></li>
<li><a class="reference internal" href="#single-tensor-pdf">single_tensor_pdf</a></li>
<li><a class="reference internal" href="#single-tensor-rtop">single_tensor_rtop</a></li>
<li><a class="reference internal" href="#sphere2cart">sphere2cart</a></li>
<li><a class="reference internal" href="#sticks-and-ball">sticks_and_ball</a></li>
<li><a class="reference internal" href="#id26">vec2vec_rotmat</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="dipy.tracking.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">tracking</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/reference/dipy.sims.txt"
           rel="nofollow">Show Source</a></li>
  </ul>

<div id="searchbox-ml" style="display: none">
  <h3>Search mailing list archive</h3>
  <script type="text/javascript">
    function mlsearch(curobj)
    {
    curobj.q.value="site:mail.scipy.org/pipermail/nipy-devel/ "+curobj.userquery.value
    }
  </script>
  <form action="http://www.google.com/search" method="get" onSubmit="mlsearch(this)">
    <input name="userquery" size="13" type="text" /> <input type="submit" value="Go" />
    <input name="q" type="hidden" />
  </form>
</div>
  
<div id="searchbox-site" style="display: none">
  <h3>Search this site</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="13" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox-ml').show(0);</script>
<script type="text/javascript">$('#searchbox-site').show(0);</script>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-dipy.sims">
<span id="sims"></span><h1><tt class="xref py py-mod docutils literal"><span class="pre">sims</span></tt><a class="headerlink" href="#module-dipy.sims" title="Permalink to this headline">¶</a></h1>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
<div class="section" id="module-dipy.sims.phantom">
<span id="module-sims-phantom"></span><h2>Module: <tt class="xref py py-mod docutils literal"><span class="pre">sims.phantom</span></tt><a class="headerlink" href="#module-dipy.sims.phantom" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.phantom.SingleTensor" title="dipy.sims.phantom.SingleTensor"><tt class="xref py py-obj docutils literal"><span class="pre">SingleTensor</span></tt></a>(gtab[,&nbsp;S0,&nbsp;evals,&nbsp;evecs,&nbsp;snr])</td>
<td>Simulated Q-space signal with a single tensor.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.phantom.add_noise" title="dipy.sims.phantom.add_noise"><tt class="xref py py-obj docutils literal"><span class="pre">add_noise</span></tt></a>(vol[,&nbsp;snr,&nbsp;S0,&nbsp;noise_type])</td>
<td>Add noise of specified distribution to a 4D array.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.phantom.diff2eigenvectors" title="dipy.sims.phantom.diff2eigenvectors"><tt class="xref py py-obj docutils literal"><span class="pre">diff2eigenvectors</span></tt></a>(dx,&nbsp;dy,&nbsp;dz)</td>
<td>numerical derivatives 2 eigenvectors</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.phantom.get_data" title="dipy.sims.phantom.get_data"><tt class="xref py py-obj docutils literal"><span class="pre">get_data</span></tt></a>([name])</td>
<td>provides filenames of some test datasets or other useful parametrisations</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.phantom.gradient_table" title="dipy.sims.phantom.gradient_table"><tt class="xref py py-obj docutils literal"><span class="pre">gradient_table</span></tt></a>(bvals[,&nbsp;bvecs,&nbsp;big_delta,&nbsp;...])</td>
<td>A general function for creating diffusion MR gradients.</td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">orbital_phantom</span></tt>((gtab=None[,&nbsp;evals,&nbsp;func,&nbsp;t])</td>
<td>Create a phantom based on a 3-D orbit <tt class="docutils literal"><span class="pre">f(t)</span> <span class="pre">-&gt;</span> <span class="pre">(x,y,z)</span></tt>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.phantom.vec2vec_rotmat" title="dipy.sims.phantom.vec2vec_rotmat"><tt class="xref py py-obj docutils literal"><span class="pre">vec2vec_rotmat</span></tt></a>(u,&nbsp;v)</td>
<td>rotation matrix from 2 unit vectors</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.sims.voxel">
<span id="module-sims-voxel"></span><h2>Module: <tt class="xref py py-mod docutils literal"><span class="pre">sims.voxel</span></tt><a class="headerlink" href="#module-dipy.sims.voxel" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.MultiTensor" title="dipy.sims.voxel.MultiTensor"><tt class="xref py py-obj docutils literal"><span class="pre">MultiTensor</span></tt></a>(gtab,&nbsp;mevals[,&nbsp;S0,&nbsp;angles,&nbsp;...])</td>
<td>Simulate a Multi-Tensor signal.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.voxel.SingleTensor" title="dipy.sims.voxel.SingleTensor"><tt class="xref py py-obj docutils literal"><span class="pre">SingleTensor</span></tt></a>(gtab[,&nbsp;S0,&nbsp;evals,&nbsp;evecs,&nbsp;snr])</td>
<td>Simulated Q-space signal with a single tensor.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.SticksAndBall" title="dipy.sims.voxel.SticksAndBall"><tt class="xref py py-obj docutils literal"><span class="pre">SticksAndBall</span></tt></a>(gtab[,&nbsp;d,&nbsp;S0,&nbsp;angles,&nbsp;...])</td>
<td>Simulate the signal for a Sticks &amp; Ball model.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.voxel.add_noise" title="dipy.sims.voxel.add_noise"><tt class="xref py py-obj docutils literal"><span class="pre">add_noise</span></tt></a>(signal,&nbsp;snr,&nbsp;S0[,&nbsp;noise_type])</td>
<td>Add noise of specified distribution to the signal from a single voxel.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.all_tensor_evecs" title="dipy.sims.voxel.all_tensor_evecs"><tt class="xref py py-obj docutils literal"><span class="pre">all_tensor_evecs</span></tt></a>(e0)</td>
<td>Given the principle tensor axis, return the array of all eigenvectors (or, the rotation matrix that orientates the tensor).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.voxel.dot" title="dipy.sims.voxel.dot"><tt class="xref py py-obj docutils literal"><span class="pre">dot</span></tt></a>(a,&nbsp;b[,&nbsp;out])</td>
<td>Dot product of two arrays.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.multi_tensor" title="dipy.sims.voxel.multi_tensor"><tt class="xref py py-obj docutils literal"><span class="pre">multi_tensor</span></tt></a>(gtab,&nbsp;mevals[,&nbsp;S0,&nbsp;angles,&nbsp;...])</td>
<td>Simulate a Multi-Tensor signal.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.voxel.multi_tensor_msd" title="dipy.sims.voxel.multi_tensor_msd"><tt class="xref py py-obj docutils literal"><span class="pre">multi_tensor_msd</span></tt></a>(mf[,&nbsp;mevals,&nbsp;tau])</td>
<td>Simulate a Multi-Tensor rtop.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.multi_tensor_odf" title="dipy.sims.voxel.multi_tensor_odf"><tt class="xref py py-obj docutils literal"><span class="pre">multi_tensor_odf</span></tt></a>(odf_verts,&nbsp;mevals,&nbsp;angles,&nbsp;...)</td>
<td>Simulate a Multi-Tensor ODF.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.voxel.multi_tensor_pdf" title="dipy.sims.voxel.multi_tensor_pdf"><tt class="xref py py-obj docutils literal"><span class="pre">multi_tensor_pdf</span></tt></a>(pdf_points,&nbsp;mevals,&nbsp;angles,&nbsp;...)</td>
<td>Simulate a Multi-Tensor ODF.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.multi_tensor_rtop" title="dipy.sims.voxel.multi_tensor_rtop"><tt class="xref py py-obj docutils literal"><span class="pre">multi_tensor_rtop</span></tt></a>(mf[,&nbsp;mevals,&nbsp;tau])</td>
<td>Simulate a Multi-Tensor rtop.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.voxel.single_tensor" title="dipy.sims.voxel.single_tensor"><tt class="xref py py-obj docutils literal"><span class="pre">single_tensor</span></tt></a>(gtab[,&nbsp;S0,&nbsp;evals,&nbsp;evecs,&nbsp;snr])</td>
<td>Simulated Q-space signal with a single tensor.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.single_tensor_msd" title="dipy.sims.voxel.single_tensor_msd"><tt class="xref py py-obj docutils literal"><span class="pre">single_tensor_msd</span></tt></a>([evals,&nbsp;tau])</td>
<td>Simulate a Multi-Tensor rtop.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.voxel.single_tensor_odf" title="dipy.sims.voxel.single_tensor_odf"><tt class="xref py py-obj docutils literal"><span class="pre">single_tensor_odf</span></tt></a>(r[,&nbsp;evals,&nbsp;evecs])</td>
<td>Simulated ODF with a single tensor.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.single_tensor_pdf" title="dipy.sims.voxel.single_tensor_pdf"><tt class="xref py py-obj docutils literal"><span class="pre">single_tensor_pdf</span></tt></a>(r[,&nbsp;evals,&nbsp;evecs,&nbsp;tau])</td>
<td>Simulated ODF with a single tensor.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.voxel.single_tensor_rtop" title="dipy.sims.voxel.single_tensor_rtop"><tt class="xref py py-obj docutils literal"><span class="pre">single_tensor_rtop</span></tt></a>([evals,&nbsp;tau])</td>
<td>Simulate a Multi-Tensor rtop.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.sphere2cart" title="dipy.sims.voxel.sphere2cart"><tt class="xref py py-obj docutils literal"><span class="pre">sphere2cart</span></tt></a>(r,&nbsp;theta,&nbsp;phi)</td>
<td>Spherical to Cartesian coordinates</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.sims.voxel.sticks_and_ball" title="dipy.sims.voxel.sticks_and_ball"><tt class="xref py py-obj docutils literal"><span class="pre">sticks_and_ball</span></tt></a>(gtab[,&nbsp;d,&nbsp;S0,&nbsp;angles,&nbsp;...])</td>
<td>Simulate the signal for a Sticks &amp; Ball model.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.sims.voxel.vec2vec_rotmat" title="dipy.sims.voxel.vec2vec_rotmat"><tt class="xref py py-obj docutils literal"><span class="pre">vec2vec_rotmat</span></tt></a>(u,&nbsp;v)</td>
<td>rotation matrix from 2 unit vectors</td>
</tr>
</tbody>
</table>
<div class="section" id="singletensor">
<h3>SingleTensor<a class="headerlink" href="#singletensor" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.phantom.SingleTensor">
<tt class="descclassname">dipy.sims.phantom.</tt><tt class="descname">SingleTensor</tt><big>(</big><em>gtab</em>, <em>S0=1</em>, <em>evals=None</em>, <em>evecs=None</em>, <em>snr=None</em><big>)</big><a class="headerlink" href="#dipy.sims.phantom.SingleTensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulated Q-space signal with a single tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<blockquote>
<div><p>Measurement directions.</p>
</div></blockquote>
<p><strong>S0</strong> : double,</p>
<blockquote>
<div><p>Strength of signal in the presence of no diffusion gradient (also
called the <tt class="docutils literal"><span class="pre">b=0</span></tt> value).</p>
</div></blockquote>
<p><strong>evals</strong> : (3,) ndarray</p>
<blockquote>
<div><p>Eigenvalues of the diffusion tensor.  By default, values typical for
prolate white matter are used.</p>
</div></blockquote>
<p><strong>evecs</strong> : (3, 3) ndarray</p>
<blockquote>
<div><p>Eigenvectors of the tensor.  You can also think of this as a rotation
matrix that transforms the direction of the tensor. The eigenvectors
needs to be column wise.</p>
</div></blockquote>
<p><strong>snr</strong> : float</p>
<blockquote>
<div><p>Signal to noise ratio, assuming Rician noise.  None implies no noise.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>S</strong> : (N,) ndarray</p>
<blockquote class="last">
<div><p>Simulated signal: <tt class="docutils literal"><span class="pre">S(q,</span> <span class="pre">tau)</span> <span class="pre">=</span> <span class="pre">S_0</span> <span class="pre">e^(-b</span> <span class="pre">g^T</span> <span class="pre">R</span> <span class="pre">D</span> <span class="pre">R.T</span> <span class="pre">g)</span></tt>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r184" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[R184]</a></td><td>M. Descoteaux, &#8220;High Angular Resolution Diffusion MRI: from Local
Estimation to Segmentation and Tractography&#8221;, PhD thesis,
University of Nice-Sophia Antipolis, p. 42, 2008.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r185" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[R185]</a></td><td>E. Stejskal and J. Tanner, &#8220;Spin diffusion measurements: spin echos
in the presence of a time-dependent field gradient&#8221;, Journal of
Chemical Physics, nr. 42, pp. 288&#8211;292, 1965.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="add-noise">
<h3>add_noise<a class="headerlink" href="#add-noise" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.phantom.add_noise">
<tt class="descclassname">dipy.sims.phantom.</tt><tt class="descname">add_noise</tt><big>(</big><em>vol</em>, <em>snr=1.0</em>, <em>S0=None</em>, <em>noise_type='rician'</em><big>)</big><a class="headerlink" href="#dipy.sims.phantom.add_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Add noise of specified distribution to a 4D array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>vol</strong> : array, shape (X,Y,Z,W)</p>
<blockquote>
<div><p>Diffusion measurements in <cite>W</cite> directions at each <tt class="docutils literal"><span class="pre">(X,</span> <span class="pre">Y,</span> <span class="pre">Z)</span></tt> voxel
position.</p>
</div></blockquote>
<p><strong>snr</strong> : float, optional</p>
<blockquote>
<div><p>The desired signal-to-noise ratio.  (See notes below.)</p>
</div></blockquote>
<p><strong>S0</strong> : float, optional</p>
<blockquote>
<div><p>Reference signal for specifying <cite>snr</cite> (defaults to 1).</p>
</div></blockquote>
<p><strong>noise_type</strong> : string, optional</p>
<blockquote>
<div><p>The distribution of noise added. Can be either &#8216;gaussian&#8217; for Gaussian
distributed noise, &#8216;rician&#8217; for Rice-distributed noise (default) or
&#8216;rayleigh&#8217; for a Rayleigh distribution.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>vol</strong> : array, same shape as vol</p>
<blockquote class="last">
<div><p>Volume with added noise.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>SNR is defined here, following <a class="reference internal" href="#r186" id="id3">[R186]</a>, as <tt class="docutils literal"><span class="pre">S0</span> <span class="pre">/</span> <span class="pre">sigma</span></tt>, where <tt class="docutils literal"><span class="pre">sigma</span></tt> is
the standard deviation of the two Gaussian distributions forming the real
and imaginary components of the Rician noise distribution (see <a class="reference internal" href="#r187" id="id4">[R187]</a>).</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r186" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R186]</td><td><em>(<a class="fn-backref" href="#id3">1</a>, <a class="fn-backref" href="#id5">2</a>)</em> Descoteaux, Angelino, Fitzgibbons and Deriche (2007) Regularized,
fast and robust q-ball imaging. MRM, 58: 497-510</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r187" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R187]</td><td><em>(<a class="fn-backref" href="#id4">1</a>, <a class="fn-backref" href="#id6">2</a>)</em> Gudbjartson and Patz (2008). The Rician distribution of noisy MRI
data. MRM 34: 910-914.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">800</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal_w_noise</span> <span class="o">=</span> <span class="n">add_noise</span><span class="p">(</span><span class="n">signal</span><span class="p">,</span> <span class="n">snr</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">noise_type</span><span class="o">=</span><span class="s">&#39;rician&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="diff2eigenvectors">
<h3>diff2eigenvectors<a class="headerlink" href="#diff2eigenvectors" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.phantom.diff2eigenvectors">
<tt class="descclassname">dipy.sims.phantom.</tt><tt class="descname">diff2eigenvectors</tt><big>(</big><em>dx</em>, <em>dy</em>, <em>dz</em><big>)</big><a class="headerlink" href="#dipy.sims.phantom.diff2eigenvectors" title="Permalink to this definition">¶</a></dt>
<dd><p>numerical derivatives 2 eigenvectors</p>
</dd></dl>

</div>
<div class="section" id="get-data">
<h3>get_data<a class="headerlink" href="#get-data" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.phantom.get_data">
<tt class="descclassname">dipy.sims.phantom.</tt><tt class="descname">get_data</tt><big>(</big><em>name='small_64D'</em><big>)</big><a class="headerlink" href="#dipy.sims.phantom.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>provides filenames of some test datasets or other useful parametrisations</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : str</p>
<blockquote>
<div><p>the filename/s of which dataset to return, one of:
&#8216;small_64D&#8217; small region of interest nifti,bvecs,bvals 64 directions
&#8216;small_101D&#8217; small region of interest nifti,bvecs,bvals 101 directions
&#8216;aniso_vox&#8217; volume with anisotropic voxel size as Nifti
&#8216;fornix&#8217; 300 tracks in Trackvis format (from Pittsburgh Brain Competition)
&#8216;gqi_vectors&#8217; the scanner wave vectors needed for a GQI acquisitions of 101 directions tested on Siemens 3T Trio
&#8216;small_25&#8217; small ROI (10x8x2) DTI data (b value 2000, 25 directions)
&#8216;test_piesno&#8217; slice of N=8, K=14 diffusion data
&#8216;reg_c&#8217; small 2D image used for validating registration
&#8216;reg_o&#8217; small 2D image used for validation registration
&#8216;cb_2&#8217; two vectorized cingulum bundles</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>fnames</strong> : tuple</p>
<blockquote class="last">
<div><p>filenames for dataset</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="kn">import</span> <span class="n">get_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fimg</span><span class="p">,</span><span class="n">fbvals</span><span class="p">,</span><span class="n">fbvecs</span><span class="o">=</span><span class="n">get_data</span><span class="p">(</span><span class="s">&#39;small_101D&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbvals</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvecs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbvecs</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nibabel</span> <span class="kn">as</span> <span class="nn">nib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">=</span><span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fimg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">=</span><span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(6, 10, 10, 102)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(102,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(102, 3)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="gradient-table">
<h3>gradient_table<a class="headerlink" href="#gradient-table" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.phantom.gradient_table">
<tt class="descclassname">dipy.sims.phantom.</tt><tt class="descname">gradient_table</tt><big>(</big><em>bvals</em>, <em>bvecs=None</em>, <em>big_delta=None</em>, <em>small_delta=None</em>, <em>b0_threshold=0</em>, <em>atol=0.01</em><big>)</big><a class="headerlink" href="#dipy.sims.phantom.gradient_table" title="Permalink to this definition">¶</a></dt>
<dd><p>A general function for creating diffusion MR gradients.</p>
<p>It reads, loads and prepares scanner parameters like the b-values and
b-vectors so that they can be useful during the reconstruction process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>bvals</strong> : can be any of the four options</p>
<blockquote>
<div><ol class="arabic simple">
<li>an array of shape (N,) or (1, N) or (N, 1) with the b-values.</li>
<li>a path for the file which contains an array like the above (1).</li>
<li>an array of shape (N, 4) or (4, N). Then this parameter is
considered to be a b-table which contains both bvals and bvecs. In
this case the next parameter is skipped.</li>
<li>a path for the file which contains an array like the one at (3).</li>
</ol>
</div></blockquote>
<p><strong>bvecs</strong> : can be any of two options</p>
<blockquote>
<div><ol class="arabic simple">
<li>an array of shape (N, 3) or (3, N) with the b-vectors.</li>
<li>a path for the file which contains an array like the previous.</li>
</ol>
</div></blockquote>
<p><strong>big_delta</strong> : float</p>
<blockquote>
<div><p>acquisition timing duration (default None)</p>
</div></blockquote>
<p><strong>small_delta</strong> : float</p>
<blockquote>
<div><p>acquisition timing duration (default None)</p>
</div></blockquote>
<p><strong>b0_threshold</strong> : float</p>
<blockquote>
<div><p>All b-values with values less than or equal to <cite>bo_threshold</cite> are
considered as b0s i.e. without diffusion weighting.</p>
</div></blockquote>
<p><strong>atol</strong> : float</p>
<blockquote>
<div><p>All b-vectors need to be unit vectors up to a tolerance.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>gradients</strong> : GradientTable</p>
<blockquote class="last">
<div><p>A GradientTable with all the gradient information.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ol class="arabic simple">
<li>Often b0s (b-values which correspond to images without diffusion
weighting) have 0 values however in some cases the scanner cannot
provide b0s of an exact 0 value and it gives a bit higher values
e.g. 6 or 12. This is the purpose of the b0_threshold in the __init__.</li>
<li>We assume that the minimum number of b-values is 7.</li>
<li>B-vectors should be unit vectors.</li>
</ol>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.gradients</span> <span class="kn">import</span> <span class="n">gradient_table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="o">=</span><span class="mi">1500</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sq2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvecs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>                <span class="p">[</span><span class="n">sq2</span><span class="p">,</span> <span class="n">sq2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                <span class="p">[</span><span class="n">sq2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sq2</span><span class="p">],</span>
<span class="gp">... </span>                <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">sq2</span><span class="p">,</span> <span class="n">sq2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span><span class="o">.</span><span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span><span class="o">.</span><span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">bvecs</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">shape</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="orbital-phantom">
<h3>orbital_phantom<a class="headerlink" href="#orbital-phantom" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt>
<tt class="descname">orbital_phantom(gtab=None, evals=array([ 0.0015,  0.0004,  0.0004]), func=None, t=array([ 0.        ,  0.00628947,  0.01257895,  0.01886842,  0.0251579 ,</tt></dt>
<dt>
<tt class="descname">0.03144737,  0.03773685,  0.04402632,  0.0503158 ,  0.05660527,</tt></dt>
<dt>
<tt class="descname">0.06289475,  0.06918422,  0.0754737 ,  0.08176317,  0.08805265,</tt></dt>
<dt>
<tt class="descname">0.09434212,  0.1006316 ,  0.10692107,  0.11321055,  0.11950002,</tt></dt>
<dt>
<tt class="descname">0.1257895 ,  0.13207897,  0.13836845,  0.14465792,  0.15094739,</tt></dt>
<dt>
<tt class="descname">0.15723687,  0.16352634,  0.16981582,  0.17610529,  0.18239477,</tt></dt>
<dt>
<tt class="descname">0.18868424,  0.19497372,  0.20126319,  0.20755267,  0.21384214,</tt></dt>
<dt>
<tt class="descname">0.22013162,  0.22642109,  0.23271057,  0.23900004,  0.24528952,</tt></dt>
<dt>
<tt class="descname">0.25157899,  0.25786847,  0.26415794,  0.27044742,  0.27673689,</tt></dt>
<dt>
<tt class="descname">0.28302637,  0.28931584,  0.29560531,  0.30189479,  0.30818426,</tt></dt>
<dt>
<tt class="descname">0.31447374,  0.32076321,  0.32705269,  0.33334216,  0.33963164,</tt></dt>
<dt>
<tt class="descname">0.34592111,  0.35221059,  0.35850006,  0.36478954,  0.37107901,</tt></dt>
<dt>
<tt class="descname">0.37736849,  0.38365796,  0.38994744,  0.39623691,  0.40252639,</tt></dt>
<dt>
<tt class="descname">0.40881586,  0.41510534,  0.42139481,  0.42768429,  0.43397376,</tt></dt>
<dt>
<tt class="descname">0.44026323,  0.44655271,  0.45284218,  0.45913166,  0.46542113,</tt></dt>
<dt>
<tt class="descname">0.47171061,  0.47800008,  0.48428956,  0.49057903,  0.49686851,</tt></dt>
<dt>
<tt class="descname">0.50315798,  0.50944746,  0.51573693,  0.52202641,  0.52831588,</tt></dt>
<dt>
<tt class="descname">0.53460536,  0.54089483,  0.54718431,  0.55347378,  0.55976326,</tt></dt>
<dt>
<tt class="descname">0.56605273,  0.57234221,  0.57863168,  0.58492115,  0.59121063,</tt></dt>
<dt>
<tt class="descname">0.5975001 ,  0.60378958,  0.61007905,  0.61636853,  0.622658  ,</tt></dt>
<dt>
<tt class="descname">0.62894748,  0.63523695,  0.64152643,  0.6478159 ,  0.65410538,</tt></dt>
<dt>
<tt class="descname">0.66039485,  0.66668433,  0.6729738 ,  0.67926328,  0.68555275,</tt></dt>
<dt>
<tt class="descname">0.69184223,  0.6981317 ,  0.70442118,  0.71071065,  0.71700013,</tt></dt>
<dt>
<tt class="descname">0.7232896 ,  0.72957907,  0.73586855,  0.74215802,  0.7484475 ,</tt></dt>
<dt>
<tt class="descname">0.75473697,  0.76102645,  0.76731592,  0.7736054 ,  0.77989487,</tt></dt>
<dt>
<tt class="descname">0.78618435,  0.79247382,  0.7987633 ,  0.80505277,  0.81134225,</tt></dt>
<dt>
<tt class="descname">0.81763172,  0.8239212 ,  0.83021067,  0.83650015,  0.84278962,</tt></dt>
<dt>
<tt class="descname">0.8490791 ,  0.85536857,  0.86165805,  0.86794752,  0.87423699,</tt></dt>
<dt>
<tt class="descname">0.88052647,  0.88681594,  0.89310542,  0.89939489,  0.90568437,</tt></dt>
<dt>
<tt class="descname">0.91197384,  0.91826332,  0.92455279,  0.93084227,  0.93713174,</tt></dt>
<dt>
<tt class="descname">0.94342122,  0.94971069,  0.95600017,  0.96228964,  0.96857912,</tt></dt>
<dt>
<tt class="descname">0.97486859,  0.98115807,  0.98744754,  0.99373702,  1.00002649,</tt></dt>
<dt>
<tt class="descname">1.00631597,  1.01260544,  1.01889491,  1.02518439,  1.03147386,</tt></dt>
<dt>
<tt class="descname">1.03776334,  1.04405281,  1.05034229,  1.05663176,  1.06292124,</tt></dt>
<dt>
<tt class="descname">1.06921071,  1.07550019,  1.08178966,  1.08807914,  1.09436861,</tt></dt>
<dt>
<tt class="descname">1.10065809,  1.10694756,  1.11323704,  1.11952651,  1.12581599,</tt></dt>
<dt>
<tt class="descname">1.13210546,  1.13839494,  1.14468441,  1.15097389,  1.15726336,</tt></dt>
<dt>
<tt class="descname">1.16355283,  1.16984231,  1.17613178,  1.18242126,  1.18871073,</tt></dt>
<dt>
<tt class="descname">1.19500021,  1.20128968,  1.20757916,  1.21386863,  1.22015811,</tt></dt>
<dt>
<tt class="descname">1.22644758,  1.23273706,  1.23902653,  1.24531601,  1.25160548,</tt></dt>
<dt>
<tt class="descname">1.25789496,  1.26418443,  1.27047391,  1.27676338,  1.28305286,</tt></dt>
<dt>
<tt class="descname">1.28934233,  1.29563181,  1.30192128,  1.30821075,  1.31450023,</tt></dt>
<dt>
<tt class="descname">1.3207897 ,  1.32707918,  1.33336865,  1.33965813,  1.3459476 ,</tt></dt>
<dt>
<tt class="descname">1.35223708,  1.35852655,  1.36481603,  1.3711055 ,  1.37739498,</tt></dt>
<dt>
<tt class="descname">1.38368445,  1.38997393,  1.3962634 ,  1.40255288,  1.40884235,</tt></dt>
<dt>
<tt class="descname">1.41513183,  1.4214213 ,  1.42771078,  1.43400025,  1.44028973,</tt></dt>
<dt>
<tt class="descname">1.4465792 ,  1.45286867,  1.45915815,  1.46544762,  1.4717371 ,</tt></dt>
<dt>
<tt class="descname">1.47802657,  1.48431605,  1.49060552,  1.496895  ,  1.50318447,</tt></dt>
<dt>
<tt class="descname">1.50947395,  1.51576342,  1.5220529 ,  1.52834237,  1.53463185,</tt></dt>
<dt>
<tt class="descname">1.54092132,  1.5472108 ,  1.55350027,  1.55978975,  1.56607922,</tt></dt>
<dt>
<tt class="descname">1.5723687 ,  1.57865817,  1.58494765,  1.59123712,  1.59752659,</tt></dt>
<dt>
<tt class="descname">1.60381607,  1.61010554,  1.61639502,  1.62268449,  1.62897397,</tt></dt>
<dt>
<tt class="descname">1.63526344,  1.64155292,  1.64784239,  1.65413187,  1.66042134,</tt></dt>
<dt>
<tt class="descname">1.66671082,  1.67300029,  1.67928977,  1.68557924,  1.69186872,</tt></dt>
<dt>
<tt class="descname">1.69815819,  1.70444767,  1.71073714,  1.71702662,  1.72331609,</tt></dt>
<dt>
<tt class="descname">1.72960557,  1.73589504,  1.74218451,  1.74847399,  1.75476346,</tt></dt>
<dt>
<tt class="descname">1.76105294,  1.76734241,  1.77363189,  1.77992136,  1.78621084,</tt></dt>
<dt>
<tt class="descname">1.79250031,  1.79878979,  1.80507926,  1.81136874,  1.81765821,</tt></dt>
<dt>
<tt class="descname">1.82394769,  1.83023716,  1.83652664,  1.84281611,  1.84910559,</tt></dt>
<dt>
<tt class="descname">1.85539506,  1.86168454,  1.86797401,  1.87426349,  1.88055296,</tt></dt>
<dt>
<tt class="descname">1.88684243,  1.89313191,  1.89942138,  1.90571086,  1.91200033,</tt></dt>
<dt>
<tt class="descname">1.91828981,  1.92457928,  1.93086876,  1.93715823,  1.94344771,</tt></dt>
<dt>
<tt class="descname">1.94973718,  1.95602666,  1.96231613,  1.96860561,  1.97489508,</tt></dt>
<dt>
<tt class="descname">1.98118456,  1.98747403,  1.99376351,  2.00005298,  2.00634246,</tt></dt>
<dt>
<tt class="descname">2.01263193,  2.01892141,  2.02521088,  2.03150035,  2.03778983,</tt></dt>
<dt>
<tt class="descname">2.0440793 ,  2.05036878,  2.05665825,  2.06294773,  2.0692372 ,</tt></dt>
<dt>
<tt class="descname">2.07552668,  2.08181615,  2.08810563,  2.0943951 ,  2.10068458,</tt></dt>
<dt>
<tt class="descname">2.10697405,  2.11326353,  2.119553  ,  2.12584248,  2.13213195,</tt></dt>
<dt>
<tt class="descname">2.13842143,  2.1447109 ,  2.15100038,  2.15728985,  2.16357932,</tt></dt>
<dt>
<tt class="descname">2.1698688 ,  2.17615827,  2.18244775,  2.18873722,  2.1950267 ,</tt></dt>
<dt>
<tt class="descname">2.20131617,  2.20760565,  2.21389512,  2.2201846 ,  2.22647407,</tt></dt>
<dt>
<tt class="descname">2.23276355,  2.23905302,  2.2453425 ,  2.25163197,  2.25792145,</tt></dt>
<dt>
<tt class="descname">2.26421092,  2.2705004 ,  2.27678987,  2.28307935,  2.28936882,</tt></dt>
<dt>
<tt class="descname">2.2956583 ,  2.30194777,  2.30823724,  2.31452672,  2.32081619,</tt></dt>
<dt>
<tt class="descname">2.32710567,  2.33339514,  2.33968462,  2.34597409,  2.35226357,</tt></dt>
<dt>
<tt class="descname">2.35855304,  2.36484252,  2.37113199,  2.37742147,  2.38371094,</tt></dt>
<dt>
<tt class="descname">2.39000042,  2.39628989,  2.40257937,  2.40886884,  2.41515832,</tt></dt>
<dt>
<tt class="descname">2.42144779,  2.42773727,  2.43402674,  2.44031622,  2.44660569,</tt></dt>
<dt>
<tt class="descname">2.45289516,  2.45918464,  2.46547411,  2.47176359,  2.47805306,</tt></dt>
<dt>
<tt class="descname">2.48434254,  2.49063201,  2.49692149,  2.50321096,  2.50950044,</tt></dt>
<dt>
<tt class="descname">2.51578991,  2.52207939,  2.52836886,  2.53465834,  2.54094781,</tt></dt>
<dt>
<tt class="descname">2.54723729,  2.55352676,  2.55981624,  2.56610571,  2.57239519,</tt></dt>
<dt>
<tt class="descname">2.57868466,  2.58497414,  2.59126361,  2.59755308,  2.60384256,</tt></dt>
<dt>
<tt class="descname">2.61013203,  2.61642151,  2.62271098,  2.62900046,  2.63528993,</tt></dt>
<dt>
<tt class="descname">2.64157941,  2.64786888,  2.65415836,  2.66044783,  2.66673731,</tt></dt>
<dt>
<tt class="descname">2.67302678,  2.67931626,  2.68560573,  2.69189521,  2.69818468,</tt></dt>
<dt>
<tt class="descname">2.70447416,  2.71076363,  2.71705311,  2.72334258,  2.72963206,</tt></dt>
<dt>
<tt class="descname">2.73592153,  2.742211  ,  2.74850048,  2.75478995,  2.76107943,</tt></dt>
<dt>
<tt class="descname">2.7673689 ,  2.77365838,  2.77994785,  2.78623733,  2.7925268 ,</tt></dt>
<dt>
<tt class="descname">2.79881628,  2.80510575,  2.81139523,  2.8176847 ,  2.82397418,</tt></dt>
<dt>
<tt class="descname">2.83026365,  2.83655313,  2.8428426 ,  2.84913208,  2.85542155,</tt></dt>
<dt>
<tt class="descname">2.86171103,  2.8680005 ,  2.87428998,  2.88057945,  2.88686892,</tt></dt>
<dt>
<tt class="descname">2.8931584 ,  2.89944787,  2.90573735,  2.91202682,  2.9183163 ,</tt></dt>
<dt>
<tt class="descname">2.92460577,  2.93089525,  2.93718472,  2.9434742 ,  2.94976367,</tt></dt>
<dt>
<tt class="descname">2.95605315,  2.96234262,  2.9686321 ,  2.97492157,  2.98121105,</tt></dt>
<dt>
<tt class="descname">2.98750052,  2.99379   ,  3.00007947,  3.00636895,  3.01265842,</tt></dt>
<dt>
<tt class="descname">3.0189479 ,  3.02523737,  3.03152684,  3.03781632,  3.04410579,</tt></dt>
<dt>
<tt class="descname">3.05039527,  3.05668474,  3.06297422,  3.06926369,  3.07555317,</tt></dt>
<dt>
<tt class="descname">3.08184264,  3.08813212,  3.09442159,  3.10071107,  3.10700054,</tt></dt>
<dt>
<tt class="descname">3.11329002,  3.11957949,  3.12586897,  3.13215844,  3.13844792,</tt></dt>
<dt>
<tt class="descname">3.14473739,  3.15102687,  3.15731634,  3.16360582,  3.16989529,</tt></dt>
<dt>
<tt class="descname">3.17618476,  3.18247424,  3.18876371,  3.19505319,  3.20134266,</tt></dt>
<dt>
<tt class="descname">3.20763214,  3.21392161,  3.22021109,  3.22650056,  3.23279004,</tt></dt>
<dt>
<tt class="descname">3.23907951,  3.24536899,  3.25165846,  3.25794794,  3.26423741,</tt></dt>
<dt>
<tt class="descname">3.27052689,  3.27681636,  3.28310584,  3.28939531,  3.29568479,</tt></dt>
<dt>
<tt class="descname">3.30197426,  3.30826374,  3.31455321,  3.32084268,  3.32713216,</tt></dt>
<dt>
<tt class="descname">3.33342163,  3.33971111,  3.34600058,  3.35229006,  3.35857953,</tt></dt>
<dt>
<tt class="descname">3.36486901,  3.37115848,  3.37744796,  3.38373743,  3.39002691,</tt></dt>
<dt>
<tt class="descname">3.39631638,  3.40260586,  3.40889533,  3.41518481,  3.42147428,</tt></dt>
<dt>
<tt class="descname">3.42776376,  3.43405323,  3.44034271,  3.44663218,  3.45292166,</tt></dt>
<dt>
<tt class="descname">3.45921113,  3.4655006 ,  3.47179008,  3.47807955,  3.48436903,</tt></dt>
<dt>
<tt class="descname">3.4906585 ,  3.49694798,  3.50323745,  3.50952693,  3.5158164 ,</tt></dt>
<dt>
<tt class="descname">3.52210588,  3.52839535,  3.53468483,  3.5409743 ,  3.54726378,</tt></dt>
<dt>
<tt class="descname">3.55355325,  3.55984273,  3.5661322 ,  3.57242168,  3.57871115,</tt></dt>
<dt>
<tt class="descname">3.58500063,  3.5912901 ,  3.59757958,  3.60386905,  3.61015852,</tt></dt>
<dt>
<tt class="descname">3.616448  ,  3.62273747,  3.62902695,  3.63531642,  3.6416059 ,</tt></dt>
<dt>
<tt class="descname">3.64789537,  3.65418485,  3.66047432,  3.6667638 ,  3.67305327,</tt></dt>
<dt>
<tt class="descname">3.67934275,  3.68563222,  3.6919217 ,  3.69821117,  3.70450065,</tt></dt>
<dt>
<tt class="descname">3.71079012,  3.7170796 ,  3.72336907,  3.72965855,  3.73594802,</tt></dt>
<dt>
<tt class="descname">3.7422375 ,  3.74852697,  3.75481644,  3.76110592,  3.76739539,</tt></dt>
<dt>
<tt class="descname">3.77368487,  3.77997434,  3.78626382,  3.79255329,  3.79884277,</tt></dt>
<dt>
<tt class="descname">3.80513224,  3.81142172,  3.81771119,  3.82400067,  3.83029014,</tt></dt>
<dt>
<tt class="descname">3.83657962,  3.84286909,  3.84915857,  3.85544804,  3.86173752,</tt></dt>
<dt>
<tt class="descname">3.86802699,  3.87431647,  3.88060594,  3.88689542,  3.89318489,</tt></dt>
<dt>
<tt class="descname">3.89947436,  3.90576384,  3.91205331,  3.91834279,  3.92463226,</tt></dt>
<dt>
<tt class="descname">3.93092174,  3.93721121,  3.94350069,  3.94979016,  3.95607964,</tt></dt>
<dt>
<tt class="descname">3.96236911,  3.96865859,  3.97494806,  3.98123754,  3.98752701,</tt></dt>
<dt>
<tt class="descname">3.99381649,  4.00010596,  4.00639544,  4.01268491,  4.01897439,</tt></dt>
<dt>
<tt class="descname">4.02526386,  4.03155334,  4.03784281,  4.04413228,  4.05042176,</tt></dt>
<dt>
<tt class="descname">4.05671123,  4.06300071,  4.06929018,  4.07557966,  4.08186913,</tt></dt>
<dt>
<tt class="descname">4.08815861,  4.09444808,  4.10073756,  4.10702703,  4.11331651,</tt></dt>
<dt>
<tt class="descname">4.11960598,  4.12589546,  4.13218493,  4.13847441,  4.14476388,</tt></dt>
<dt>
<tt class="descname">4.15105336,  4.15734283,  4.16363231,  4.16992178,  4.17621126,</tt></dt>
<dt>
<tt class="descname">4.18250073,  4.1887902 ,  4.19507968,  4.20136915,  4.20765863,</tt></dt>
<dt>
<tt class="descname">4.2139481 ,  4.22023758,  4.22652705,  4.23281653,  4.239106  ,</tt></dt>
<dt>
<tt class="descname">4.24539548,  4.25168495,  4.25797443,  4.2642639 ,  4.27055338,</tt></dt>
<dt>
<tt class="descname">4.27684285,  4.28313233,  4.2894218 ,  4.29571128,  4.30200075,</tt></dt>
<dt>
<tt class="descname">4.30829023,  4.3145797 ,  4.32086918,  4.32715865,  4.33344812,</tt></dt>
<dt>
<tt class="descname">4.3397376 ,  4.34602707,  4.35231655,  4.35860602,  4.3648955 ,</tt></dt>
<dt>
<tt class="descname">4.37118497,  4.37747445,  4.38376392,  4.3900534 ,  4.39634287,</tt></dt>
<dt>
<tt class="descname">4.40263235,  4.40892182,  4.4152113 ,  4.42150077,  4.42779025,</tt></dt>
<dt>
<tt class="descname">4.43407972,  4.4403692 ,  4.44665867,  4.45294815,  4.45923762,</tt></dt>
<dt>
<tt class="descname">4.4655271 ,  4.47181657,  4.47810604,  4.48439552,  4.49068499,</tt></dt>
<dt>
<tt class="descname">4.49697447,  4.50326394,  4.50955342,  4.51584289,  4.52213237,</tt></dt>
<dt>
<tt class="descname">4.52842184,  4.53471132,  4.54100079,  4.54729027,  4.55357974,</tt></dt>
<dt>
<tt class="descname">4.55986922,  4.56615869,  4.57244817,  4.57873764,  4.58502712,</tt></dt>
<dt>
<tt class="descname">4.59131659,  4.59760607,  4.60389554,  4.61018502,  4.61647449,</tt></dt>
<dt>
<tt class="descname">4.62276396,  4.62905344,  4.63534291,  4.64163239,  4.64792186,</tt></dt>
<dt>
<tt class="descname">4.65421134,  4.66050081,  4.66679029,  4.67307976,  4.67936924,</tt></dt>
<dt>
<tt class="descname">4.68565871,  4.69194819,  4.69823766,  4.70452714,  4.71081661,</tt></dt>
<dt>
<tt class="descname">4.71710609,  4.72339556,  4.72968504,  4.73597451,  4.74226399,</tt></dt>
<dt>
<tt class="descname">4.74855346,  4.75484294,  4.76113241,  4.76742188,  4.77371136,</tt></dt>
<dt>
<tt class="descname">4.78000083,  4.78629031,  4.79257978,  4.79886926,  4.80515873,</tt></dt>
<dt>
<tt class="descname">4.81144821,  4.81773768,  4.82402716,  4.83031663,  4.83660611,</tt></dt>
<dt>
<tt class="descname">4.84289558,  4.84918506,  4.85547453,  4.86176401,  4.86805348,</tt></dt>
<dt>
<tt class="descname">4.87434296,  4.88063243,  4.88692191,  4.89321138,  4.89950086,</tt></dt>
<dt>
<tt class="descname">4.90579033,  4.9120798 ,  4.91836928,  4.92465875,  4.93094823,</tt></dt>
<dt>
<tt class="descname">4.9372377 ,  4.94352718,  4.94981665,  4.95610613,  4.9623956 ,</tt></dt>
<dt>
<tt class="descname">4.96868508,  4.97497455,  4.98126403,  4.9875535 ,  4.99384298,</tt></dt>
<dt>
<tt class="descname">5.00013245,  5.00642193,  5.0127114 ,  5.01900088,  5.02529035,</tt></dt>
<dt>
<tt class="descname">5.03157983,  5.0378693 ,  5.04415878,  5.05044825,  5.05673772,</tt></dt>
<dt>
<tt class="descname">5.0630272 ,  5.06931667,  5.07560615,  5.08189562,  5.0881851 ,</tt></dt>
<dt>
<tt class="descname">5.09447457,  5.10076405,  5.10705352,  5.113343  ,  5.11963247,</tt></dt>
<dt>
<tt class="descname">5.12592195,  5.13221142,  5.1385009 ,  5.14479037,  5.15107985,</tt></dt>
<dt>
<tt class="descname">5.15736932,  5.1636588 ,  5.16994827,  5.17623775,  5.18252722,</tt></dt>
<dt>
<tt class="descname">5.1888167 ,  5.19510617,  5.20139564,  5.20768512,  5.21397459,</tt></dt>
<dt>
<tt class="descname">5.22026407,  5.22655354,  5.23284302,  5.23913249,  5.24542197,</tt></dt>
<dt>
<tt class="descname">5.25171144,  5.25800092,  5.26429039,  5.27057987,  5.27686934,</tt></dt>
<dt>
<tt class="descname">5.28315882,  5.28944829,  5.29573777,  5.30202724,  5.30831672,</tt></dt>
<dt>
<tt class="descname">5.31460619,  5.32089567,  5.32718514,  5.33347462,  5.33976409,</tt></dt>
<dt>
<tt class="descname">5.34605356,  5.35234304,  5.35863251,  5.36492199,  5.37121146,</tt></dt>
<dt>
<tt class="descname">5.37750094,  5.38379041,  5.39007989,  5.39636936,  5.40265884,</tt></dt>
<dt>
<tt class="descname">5.40894831,  5.41523779,  5.42152726,  5.42781674,  5.43410621,</tt></dt>
<dt>
<tt class="descname">5.44039569,  5.44668516,  5.45297464,  5.45926411,  5.46555359,</tt></dt>
<dt>
<tt class="descname">5.47184306,  5.47813254,  5.48442201,  5.49071148,  5.49700096,</tt></dt>
<dt>
<tt class="descname">5.50329043,  5.50957991,  5.51586938,  5.52215886,  5.52844833,</tt></dt>
<dt>
<tt class="descname">5.53473781,  5.54102728,  5.54731676,  5.55360623,  5.55989571,</tt></dt>
<dt>
<tt class="descname">5.56618518,  5.57247466,  5.57876413,  5.58505361,  5.59134308,</tt></dt>
<dt>
<tt class="descname">5.59763256,  5.60392203,  5.61021151,  5.61650098,  5.62279046,</tt></dt>
<dt>
<tt class="descname">5.62907993,  5.6353694 ,  5.64165888,  5.64794835,  5.65423783,</tt></dt>
<dt>
<tt class="descname">5.6605273 ,  5.66681678,  5.67310625,  5.67939573,  5.6856852 ,</tt></dt>
<dt>
<tt class="descname">5.69197468,  5.69826415,  5.70455363,  5.7108431 ,  5.71713258,</tt></dt>
<dt>
<tt class="descname">5.72342205,  5.72971153,  5.736001  ,  5.74229048,  5.74857995,</tt></dt>
<dt>
<tt class="descname">5.75486943,  5.7611589 ,  5.76744838,  5.77373785,  5.78002732,</tt></dt>
<dt>
<tt class="descname">5.7863168 ,  5.79260627,  5.79889575,  5.80518522,  5.8114747 ,</tt></dt>
<dt>
<tt class="descname">5.81776417,  5.82405365,  5.83034312,  5.8366326 ,  5.84292207,</tt></dt>
<dt>
<tt class="descname">5.84921155,  5.85550102,  5.8617905 ,  5.86807997,  5.87436945,</tt></dt>
<dt>
<tt class="descname">5.88065892,  5.8869484 ,  5.89323787,  5.89952735,  5.90581682,</tt></dt>
<dt>
<tt class="descname">5.9121063 ,  5.91839577,  5.92468524,  5.93097472,  5.93726419,</tt></dt>
<dt>
<tt class="descname">5.94355367,  5.94984314,  5.95613262,  5.96242209,  5.96871157,</tt></dt>
<dt>
<tt class="descname">5.97500104,  5.98129052,  5.98757999,  5.99386947,  6.00015894,</tt></dt>
<dt>
<tt class="descname">6.00644842,  6.01273789,  6.01902737,  6.02531684,  6.03160632,</tt></dt>
<dt>
<tt class="descname">6.03789579,  6.04418527,  6.05047474,  6.05676422,  6.06305369,</tt></dt>
<dt>
<tt class="descname">6.06934316,  6.07563264,  6.08192211,  6.08821159,  6.09450106,</tt></dt>
<dt>
<tt class="descname">6.10079054,  6.10708001,  6.11336949,  6.11965896,  6.12594844,</tt></dt>
<dt>
<tt class="descname">6.13223791,  6.13852739,  6.14481686,  6.15110634,  6.15739581,</tt></dt>
<dt>
<tt class="descname">6.16368529,  6.16997476,  6.17626424,  6.18255371,  6.18884319,</tt></dt>
<dt>
<tt class="descname">6.19513266,  6.20142214,  6.20771161,  6.21400108,  6.22029056,</tt></dt>
<dt>
<tt class="descname">6.22658003,  6.23286951,  6.23915898,  6.24544846,  6.25173793,</tt></dt>
<dt>
<tt class="descname">6.25802741,  6.26431688,  6.27060636,  6.27689583,  6.28318531]), datashape=(64, 64, 64, 65), origin=(32, 32, 32), scale=(25, 25, 25), angles=array([ 0.        ,  0.2026834 ,  0.40536679,  0.60805019,  0.81073359,</tt></dt>
<dt>
<tt class="descname">1.01341699,  1.21610038,  1.41878378,  1.62146718,  1.82415057,</tt></dt>
<dt>
<tt class="descname">2.02683397,  2.22951737,  2.43220076,  2.63488416,  2.83756756,</tt></dt>
<dt>
<tt class="descname">3.04025096,  3.24293435,  3.44561775,  3.64830115,  3.85098454,</tt></dt>
<dt>
<tt class="descname">4.05366794,  4.25635134,  4.45903473,  4.66171813,  4.86440153,</tt></dt>
<dt>
<tt class="descname">5.06708493,  5.26976832,  5.47245172,  5.67513512,  5.87781851,</tt></dt>
<dt>
<tt class="descname">6.08050191,  6.28318531]), radii=array([ 0.2 ,  0.56,  0.92,  1.28,  1.64,  2.  ]), S0=100.0, snr=None)</tt></dt>
<dd><p>Create a phantom based on a 3-D orbit <tt class="docutils literal"><span class="pre">f(t)</span> <span class="pre">-&gt;</span> <span class="pre">(x,y,z)</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<blockquote>
<div><p>Gradient table of measurement directions.</p>
</div></blockquote>
<p><strong>evals</strong> : array, shape (3,)</p>
<blockquote>
<div><p>Tensor eigenvalues.</p>
</div></blockquote>
<p><strong>func</strong> : user defined function f(t)-&gt;(x,y,z)</p>
<blockquote>
<div><p>It could be desirable for <tt class="docutils literal"><span class="pre">-1=&lt;x,y,z</span> <span class="pre">&lt;=1</span></tt>.
If None creates a circular orbit.</p>
</div></blockquote>
<p><strong>t</strong> : array, shape (K,)</p>
<blockquote>
<div><p>Represents time for the orbit. Default is
<tt class="docutils literal"><span class="pre">np.linspace(0,</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">np.pi,</span> <span class="pre">1000)</span></tt>.</p>
</div></blockquote>
<p><strong>datashape</strong> : array, shape (X,Y,Z,W)</p>
<blockquote>
<div><p>Size of the output simulated data</p>
</div></blockquote>
<p><strong>origin</strong> : tuple, shape (3,)</p>
<blockquote>
<div><p>Define the center for the volume</p>
</div></blockquote>
<p><strong>scale</strong> : tuple, shape (3,)</p>
<blockquote>
<div><p>Scale the function before applying to the grid</p>
</div></blockquote>
<p><strong>angles</strong> : array, shape (L,)</p>
<blockquote>
<div><p>Density angle points, always perpendicular to the first eigen vector
Default np.linspace(0, 2 * np.pi, 32).</p>
</div></blockquote>
<p><strong>radii</strong> : array, shape (M,)</p>
<blockquote>
<div><p>Thickness radii.  Default <tt class="docutils literal"><span class="pre">np.linspace(0.2,</span> <span class="pre">2,</span> <span class="pre">6)</span></tt>.
angles and radii define the total thickness options</p>
</div></blockquote>
<p><strong>S0</strong> : double, optional</p>
<blockquote>
<div><p>Maximum simulated signal. Default 100.</p>
</div></blockquote>
<p><strong>snr</strong> : float, optional</p>
<blockquote>
<div><p>The signal to noise ratio set to apply Rician noise to the data.
Default is to not add noise at all.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>data</strong> : array, shape (datashape)</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#dipy.sims.phantom.add_noise" title="dipy.sims.phantom.add_noise"><tt class="xref py py-obj docutils literal"><span class="pre">add_noise</span></tt></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">... </span>   <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">... </span>   <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">orbital_phantom</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="vec2vec-rotmat">
<h3>vec2vec_rotmat<a class="headerlink" href="#vec2vec-rotmat" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.phantom.vec2vec_rotmat">
<tt class="descclassname">dipy.sims.phantom.</tt><tt class="descname">vec2vec_rotmat</tt><big>(</big><em>u</em>, <em>v</em><big>)</big><a class="headerlink" href="#dipy.sims.phantom.vec2vec_rotmat" title="Permalink to this definition">¶</a></dt>
<dd><p>rotation matrix from 2 unit vectors</p>
<p>u,v being unit 3d vectors return a 3x3 rotation matrix R than aligns u to v.</p>
<p>In general there are many rotations that will map u to v. If S is any
rotation using v as an axis then R.S will also map u to v since (S.R)u =
S(Ru) = Sv = v.  The rotation R returned by vec2vec_rotmat leaves fixed the
perpendicular to the plane spanned by u and v.</p>
<p>The transpose of R will align v to u.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>u</strong> : array, shape(3,)</p>
<p><strong>v</strong> : array, shape(3,)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>R</strong> : array, shape(3,3)</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.geometry</span> <span class="kn">import</span> <span class="n">vec2vec_rotmat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span><span class="o">=</span><span class="n">vec2vec_rotmat</span><span class="p">(</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">u</span><span class="p">)</span>
<span class="go">array([ 0.,  1.,  0.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
<span class="go">array([ 1.,  0.,  0.])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="multitensor">
<h3>MultiTensor<a class="headerlink" href="#multitensor" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.MultiTensor">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">MultiTensor</tt><big>(</big><em>gtab, mevals, S0=100, angles=[(0, 0), (90, 0)], fractions=[50, 50], snr=20</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.MultiTensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate a Multi-Tensor signal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<p><strong>mevals</strong> : array (K, 3)</p>
<blockquote>
<div><p>each tensor&#8217;s eigenvalues in each row</p>
</div></blockquote>
<p><strong>S0</strong> : float</p>
<blockquote>
<div><p>Unweighted signal value (b0 signal).</p>
</div></blockquote>
<p><strong>angles</strong> : array (K,2) or (K,3)</p>
<blockquote>
<div><p>List of K tensor directions in polar angles (in degrees) or unit vectors</p>
</div></blockquote>
<p><strong>fractions</strong> : float</p>
<blockquote>
<div><p>Percentage of the contribution of each tensor. The sum of fractions
should be equal to 100%.</p>
</div></blockquote>
<p><strong>snr</strong> : float</p>
<blockquote>
<div><p>Signal to noise ratio, assuming Rician noise.  If set to None, no
noise is added.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>S</strong> : (N,) ndarray</p>
<blockquote>
<div><p>Simulated signal.</p>
</div></blockquote>
<p><strong>sticks</strong> : (M,3)</p>
<blockquote class="last">
<div><p>Sticks in cartesian coordinates.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.sims.voxel</span> <span class="kn">import</span> <span class="n">multi_tensor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="kn">import</span> <span class="n">get_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.gradients</span> <span class="kn">import</span> <span class="n">gradient_table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.io.gradients</span> <span class="kn">import</span> <span class="n">read_bvals_bvecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fimg</span><span class="p">,</span> <span class="n">fbvals</span><span class="p">,</span> <span class="n">fbvecs</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s">&#39;small_101D&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span> <span class="o">=</span> <span class="n">read_bvals_bvecs</span><span class="p">(</span><span class="n">fbvals</span><span class="p">,</span> <span class="n">fbvecs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mevals</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mf">0.0015</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">],[</span><span class="mf">0.0015</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">multi_tensor</span><span class="p">(</span><span class="n">gtab</span><span class="p">,</span> <span class="n">mevals</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id7">
<h3>SingleTensor<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.SingleTensor">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">SingleTensor</tt><big>(</big><em>gtab</em>, <em>S0=1</em>, <em>evals=None</em>, <em>evecs=None</em>, <em>snr=None</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.SingleTensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulated Q-space signal with a single tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<blockquote>
<div><p>Measurement directions.</p>
</div></blockquote>
<p><strong>S0</strong> : double,</p>
<blockquote>
<div><p>Strength of signal in the presence of no diffusion gradient (also
called the <tt class="docutils literal"><span class="pre">b=0</span></tt> value).</p>
</div></blockquote>
<p><strong>evals</strong> : (3,) ndarray</p>
<blockquote>
<div><p>Eigenvalues of the diffusion tensor.  By default, values typical for
prolate white matter are used.</p>
</div></blockquote>
<p><strong>evecs</strong> : (3, 3) ndarray</p>
<blockquote>
<div><p>Eigenvectors of the tensor.  You can also think of this as a rotation
matrix that transforms the direction of the tensor. The eigenvectors
needs to be column wise.</p>
</div></blockquote>
<p><strong>snr</strong> : float</p>
<blockquote>
<div><p>Signal to noise ratio, assuming Rician noise.  None implies no noise.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>S</strong> : (N,) ndarray</p>
<blockquote class="last">
<div><p>Simulated signal: <tt class="docutils literal"><span class="pre">S(q,</span> <span class="pre">tau)</span> <span class="pre">=</span> <span class="pre">S_0</span> <span class="pre">e^(-b</span> <span class="pre">g^T</span> <span class="pre">R</span> <span class="pre">D</span> <span class="pre">R.T</span> <span class="pre">g)</span></tt>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r188" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[R188]</a></td><td>M. Descoteaux, &#8220;High Angular Resolution Diffusion MRI: from Local
Estimation to Segmentation and Tractography&#8221;, PhD thesis,
University of Nice-Sophia Antipolis, p. 42, 2008.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r189" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[R189]</a></td><td>E. Stejskal and J. Tanner, &#8220;Spin diffusion measurements: spin echos
in the presence of a time-dependent field gradient&#8221;, Journal of
Chemical Physics, nr. 42, pp. 288&#8211;292, 1965.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="sticksandball">
<h3>SticksAndBall<a class="headerlink" href="#sticksandball" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.SticksAndBall">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">SticksAndBall</tt><big>(</big><em>gtab, d=0.0015, S0=100, angles=[(0, 0), (90, 0)], fractions=[35, 35], snr=20</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.SticksAndBall" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate the signal for a Sticks &amp; Ball model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<blockquote>
<div><p>Signal measurement directions.</p>
</div></blockquote>
<p><strong>d</strong> : float</p>
<blockquote>
<div><p>Diffusivity value.</p>
</div></blockquote>
<p><strong>S0</strong> : float</p>
<blockquote>
<div><p>Unweighted signal value.</p>
</div></blockquote>
<p><strong>angles</strong> : array (K,2) or (K, 3)</p>
<blockquote>
<div><p>List of K polar angles (in degrees) for the sticks or array of K
sticks as unit vectors.</p>
</div></blockquote>
<p><strong>fractions</strong> : float</p>
<blockquote>
<div><p>Percentage of each stick.  Remainder to 100 specifies isotropic
component.</p>
</div></blockquote>
<p><strong>snr</strong> : float</p>
<blockquote>
<div><p>Signal to noise ratio, assuming Rician noise.  If set to None, no
noise is added.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>S</strong> : (N,) ndarray</p>
<blockquote>
<div><p>Simulated signal.</p>
</div></blockquote>
<p><strong>sticks</strong> : (M,3)</p>
<blockquote class="last">
<div><p>Sticks in cartesian coordinates.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r190" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[R190]</a></td><td>Behrens et al., &#8220;Probabilistic diffusion
tractography with multiple fiber orientations:  what can we gain?&#8221;,
Neuroimage, 2007.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id11">
<h3>add_noise<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.add_noise">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">add_noise</tt><big>(</big><em>signal</em>, <em>snr</em>, <em>S0</em>, <em>noise_type='rician'</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.add_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Add noise of specified distribution to the signal from a single voxel.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>signal</strong> : 1-d ndarray</p>
<blockquote>
<div><p>The signal in the voxel.</p>
</div></blockquote>
<p><strong>snr</strong> : float</p>
<blockquote>
<div><p>The desired signal-to-noise ratio. (See notes below.)
If <cite>snr</cite> is None, return the signal as-is.</p>
</div></blockquote>
<p><strong>S0</strong> : float</p>
<blockquote>
<div><p>Reference signal for specifying <cite>snr</cite>.</p>
</div></blockquote>
<p><strong>noise_type</strong> : string, optional</p>
<blockquote>
<div><p>The distribution of noise added. Can be either &#8216;gaussian&#8217; for Gaussian
distributed noise, &#8216;rician&#8217; for Rice-distributed noise (default) or
&#8216;rayleigh&#8217; for a Rayleigh distribution.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>signal</strong> : array, same shape as the input</p>
<blockquote class="last">
<div><p>Signal with added noise.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>SNR is defined here, following <a class="reference internal" href="#r191" id="id12">[R191]</a>, as <tt class="docutils literal"><span class="pre">S0</span> <span class="pre">/</span> <span class="pre">sigma</span></tt>, where <tt class="docutils literal"><span class="pre">sigma</span></tt> is
the standard deviation of the two Gaussian distributions forming the real
and imaginary components of the Rician noise distribution (see <a class="reference internal" href="#r192" id="id13">[R192]</a>).</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r191" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R191]</td><td><em>(<a class="fn-backref" href="#id12">1</a>, <a class="fn-backref" href="#id14">2</a>)</em> Descoteaux, Angelino, Fitzgibbons and Deriche (2007) Regularized,
fast and robust q-ball imaging. MRM, 58: 497-510</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r192" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R192]</td><td><em>(<a class="fn-backref" href="#id13">1</a>, <a class="fn-backref" href="#id15">2</a>)</em> Gudbjartson and Patz (2008). The Rician distribution of noisy MRI
data. MRM 34: 910-914.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">800</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal_w_noise</span> <span class="o">=</span> <span class="n">add_noise</span><span class="p">(</span><span class="n">signal</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">100.</span><span class="p">,</span> <span class="n">noise_type</span><span class="o">=</span><span class="s">&#39;rician&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="all-tensor-evecs">
<h3>all_tensor_evecs<a class="headerlink" href="#all-tensor-evecs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.all_tensor_evecs">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">all_tensor_evecs</tt><big>(</big><em>e0</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.all_tensor_evecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the principle tensor axis, return the array of all
eigenvectors (or, the rotation matrix that orientates the tensor).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>e0</strong> : (3,) ndarray</p>
<blockquote>
<div><p>Principle tensor axis.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>evecs</strong> : (3,3) ndarray</p>
<blockquote class="last">
<div><p>Tensor eigenvectors.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="dot">
<h3>dot<a class="headerlink" href="#dot" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.dot">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">dot</tt><big>(</big><em>a</em>, <em>b</em>, <em>out=None</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Dot product of two arrays.</p>
<p>For 2-D arrays it is equivalent to matrix multiplication, and for 1-D
arrays to inner product of vectors (without complex conjugation). For
N dimensions it is a sum product over the last axis of <cite>a</cite> and
the second-to-last of <cite>b</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,:]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">,:,</span><span class="n">m</span><span class="p">])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : array_like</p>
<blockquote>
<div><p>First argument.</p>
</div></blockquote>
<p><strong>b</strong> : array_like</p>
<blockquote>
<div><p>Second argument.</p>
</div></blockquote>
<p><strong>out</strong> : ndarray, optional</p>
<blockquote>
<div><p>Output argument. This must have the exact kind that would be returned
if it was not used. In particular, it must have the right type, must be
C-contiguous, and its dtype must be the dtype that would be returned
for <cite>dot(a,b)</cite>. This is a performance feature. Therefore, if these
conditions are not met, an exception is raised, instead of attempting
to be flexible.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>output</strong> : ndarray</p>
<blockquote>
<div><p>Returns the dot product of <cite>a</cite> and <cite>b</cite>.  If <cite>a</cite> and <cite>b</cite> are both
scalars or both 1-D arrays then a scalar is returned; otherwise
an array is returned.
If <cite>out</cite> is given, then it is returned.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong> :</p>
<blockquote class="last">
<div><p>If the last dimension of <cite>a</cite> is not the same size as
the second-to-last dimension of <cite>b</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">vdot</span></tt></dt>
<dd>Complex-conjugating dot product.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">tensordot</span></tt></dt>
<dd>Sum products over arbitrary axes.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">einsum</span></tt></dt>
<dd>Einstein summation convention.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">12</span>
</pre></div>
</div>
<p>Neither argument is complex-conjugated:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">([</span><span class="mi">2j</span><span class="p">,</span> <span class="mi">3j</span><span class="p">],</span> <span class="p">[</span><span class="mi">2j</span><span class="p">,</span> <span class="mi">3j</span><span class="p">])</span>
<span class="go">(-13+0j)</span>
</pre></div>
</div>
<p>For 2-D arrays it&#8217;s the matrix product:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="go">array([[4, 1],</span>
<span class="go">       [2, 2]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">4</span><span class="o">*</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">4</span><span class="o">*</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="go">499128</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,:]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,:,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">499128</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="multi-tensor">
<h3>multi_tensor<a class="headerlink" href="#multi-tensor" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.multi_tensor">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">multi_tensor</tt><big>(</big><em>gtab, mevals, S0=100, angles=[(0, 0), (90, 0)], fractions=[50, 50], snr=20</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.multi_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate a Multi-Tensor signal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<p><strong>mevals</strong> : array (K, 3)</p>
<blockquote>
<div><p>each tensor&#8217;s eigenvalues in each row</p>
</div></blockquote>
<p><strong>S0</strong> : float</p>
<blockquote>
<div><p>Unweighted signal value (b0 signal).</p>
</div></blockquote>
<p><strong>angles</strong> : array (K,2) or (K,3)</p>
<blockquote>
<div><p>List of K tensor directions in polar angles (in degrees) or unit vectors</p>
</div></blockquote>
<p><strong>fractions</strong> : float</p>
<blockquote>
<div><p>Percentage of the contribution of each tensor. The sum of fractions
should be equal to 100%.</p>
</div></blockquote>
<p><strong>snr</strong> : float</p>
<blockquote>
<div><p>Signal to noise ratio, assuming Rician noise.  If set to None, no
noise is added.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>S</strong> : (N,) ndarray</p>
<blockquote>
<div><p>Simulated signal.</p>
</div></blockquote>
<p><strong>sticks</strong> : (M,3)</p>
<blockquote class="last">
<div><p>Sticks in cartesian coordinates.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.sims.voxel</span> <span class="kn">import</span> <span class="n">multi_tensor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="kn">import</span> <span class="n">get_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.gradients</span> <span class="kn">import</span> <span class="n">gradient_table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.io.gradients</span> <span class="kn">import</span> <span class="n">read_bvals_bvecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fimg</span><span class="p">,</span> <span class="n">fbvals</span><span class="p">,</span> <span class="n">fbvecs</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s">&#39;small_101D&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span> <span class="o">=</span> <span class="n">read_bvals_bvecs</span><span class="p">(</span><span class="n">fbvals</span><span class="p">,</span> <span class="n">fbvecs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mevals</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mf">0.0015</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">],[</span><span class="mf">0.0015</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">multi_tensor</span><span class="p">(</span><span class="n">gtab</span><span class="p">,</span> <span class="n">mevals</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="multi-tensor-msd">
<h3>multi_tensor_msd<a class="headerlink" href="#multi-tensor-msd" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.multi_tensor_msd">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">multi_tensor_msd</tt><big>(</big><em>mf</em>, <em>mevals=None</em>, <em>tau=0.025330295910584444</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.multi_tensor_msd" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate a Multi-Tensor rtop.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mf</strong> : sequence of floats, bounded [0,1]</p>
<blockquote>
<div><p>Percentages of the fractions for each tensor.</p>
</div></blockquote>
<p><strong>mevals</strong> : sequence of 1D arrays,</p>
<blockquote>
<div><p>Eigen-values for each tensor.  By default, values typical for prolate
white matter are used.</p>
</div></blockquote>
<p><strong>tau</strong> : float,</p>
<blockquote>
<div><p>diffusion time. By default the value that makes q=sqrt(b).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>msd</strong> : float,</p>
<blockquote class="last">
<div><p>Mean square displacement.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r193" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id16">[R193]</a></td><td>Cheng J., &#8220;Estimation and Processing of Ensemble Average Propagator and
Its Features in Diffusion MRI&#8221;, PhD Thesis, 2012.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="multi-tensor-odf">
<h3>multi_tensor_odf<a class="headerlink" href="#multi-tensor-odf" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.multi_tensor_odf">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">multi_tensor_odf</tt><big>(</big><em>odf_verts</em>, <em>mevals</em>, <em>angles</em>, <em>fractions</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.multi_tensor_odf" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate a Multi-Tensor ODF.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>odf_verts</strong> : (N,3) ndarray</p>
<blockquote>
<div><p>Vertices of the reconstruction sphere.</p>
</div></blockquote>
<p><strong>mevals</strong> : sequence of 1D arrays,</p>
<blockquote>
<div><p>Eigen-values for each tensor.</p>
</div></blockquote>
<p><strong>angles</strong> : sequence of 2d tuples,</p>
<blockquote>
<div><p>Sequence of principal directions for each tensor in polar angles
or cartesian unit coordinates.</p>
</div></blockquote>
<p><strong>fractions</strong> : sequence of floats,</p>
<blockquote>
<div><p>Percentages of the fractions for each tensor.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ODF</strong> : (N,) ndarray</p>
<blockquote class="last">
<div><p>Orientation distribution function.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Simulate a MultiTensor ODF with two peaks and calculate its exact ODF.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.sims.voxel</span> <span class="kn">import</span> <span class="n">multi_tensor_odf</span><span class="p">,</span> <span class="n">all_tensor_evecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="kn">import</span> <span class="n">get_sphere</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s">&#39;symmetric724&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="n">sphere</span><span class="o">.</span><span class="n">faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mevals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mf">0.0015</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">],[</span><span class="mf">0.0015</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">,</span> <span class="mf">0.0003</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angles</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">odf</span> <span class="o">=</span> <span class="n">multi_tensor_odf</span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span> <span class="n">mevals</span><span class="p">,</span> <span class="n">angles</span><span class="p">,</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="multi-tensor-pdf">
<h3>multi_tensor_pdf<a class="headerlink" href="#multi-tensor-pdf" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.multi_tensor_pdf">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">multi_tensor_pdf</tt><big>(</big><em>pdf_points</em>, <em>mevals</em>, <em>angles</em>, <em>fractions</em>, <em>tau=0.025330295910584444</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.multi_tensor_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate a Multi-Tensor ODF.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>pdf_points</strong> : (N, 3) ndarray</p>
<blockquote>
<div><p>Points to evaluate the PDF.</p>
</div></blockquote>
<p><strong>mevals</strong> : sequence of 1D arrays,</p>
<blockquote>
<div><p>Eigen-values for each tensor.  By default, values typical for prolate
white matter are used.</p>
</div></blockquote>
<p><strong>angles</strong> : sequence,</p>
<blockquote>
<div><p>Sequence of principal directions for each tensor in polar angles
or cartesian unit coordinates.</p>
</div></blockquote>
<p><strong>fractions</strong> : sequence of floats,</p>
<blockquote>
<div><p>Percentages of the fractions for each tensor.</p>
</div></blockquote>
<p><strong>tau</strong> : float,</p>
<blockquote>
<div><p>diffusion time. By default the value that makes q=sqrt(b).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pdf</strong> : (N,) ndarray,</p>
<blockquote class="last">
<div><p>Probability density function of the water displacement.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r194" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id17">[R194]</a></td><td>Cheng J., &#8220;Estimation and Processing of Ensemble Average Propagator
and its Features in Diffusion MRI&#8221;, PhD Thesis, 2012.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="multi-tensor-rtop">
<h3>multi_tensor_rtop<a class="headerlink" href="#multi-tensor-rtop" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.multi_tensor_rtop">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">multi_tensor_rtop</tt><big>(</big><em>mf</em>, <em>mevals=None</em>, <em>tau=0.025330295910584444</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.multi_tensor_rtop" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate a Multi-Tensor rtop.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mf</strong> : sequence of floats, bounded [0,1]</p>
<blockquote>
<div><p>Percentages of the fractions for each tensor.</p>
</div></blockquote>
<p><strong>mevals</strong> : sequence of 1D arrays,</p>
<blockquote>
<div><p>Eigen-values for each tensor.  By default, values typical for prolate
white matter are used.</p>
</div></blockquote>
<p><strong>tau</strong> : float,</p>
<blockquote>
<div><p>diffusion time. By default the value that makes q=sqrt(b).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>rtop</strong> : float,</p>
<blockquote class="last">
<div><p>Return to origin probability.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r195" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id18">[R195]</a></td><td>Cheng J., &#8220;Estimation and Processing of Ensemble Average Propagator and
Its Features in Diffusion MRI&#8221;, PhD Thesis, 2012.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="single-tensor">
<h3>single_tensor<a class="headerlink" href="#single-tensor" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.single_tensor">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">single_tensor</tt><big>(</big><em>gtab</em>, <em>S0=1</em>, <em>evals=None</em>, <em>evecs=None</em>, <em>snr=None</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.single_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulated Q-space signal with a single tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<blockquote>
<div><p>Measurement directions.</p>
</div></blockquote>
<p><strong>S0</strong> : double,</p>
<blockquote>
<div><p>Strength of signal in the presence of no diffusion gradient (also
called the <tt class="docutils literal"><span class="pre">b=0</span></tt> value).</p>
</div></blockquote>
<p><strong>evals</strong> : (3,) ndarray</p>
<blockquote>
<div><p>Eigenvalues of the diffusion tensor.  By default, values typical for
prolate white matter are used.</p>
</div></blockquote>
<p><strong>evecs</strong> : (3, 3) ndarray</p>
<blockquote>
<div><p>Eigenvectors of the tensor.  You can also think of this as a rotation
matrix that transforms the direction of the tensor. The eigenvectors
needs to be column wise.</p>
</div></blockquote>
<p><strong>snr</strong> : float</p>
<blockquote>
<div><p>Signal to noise ratio, assuming Rician noise.  None implies no noise.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>S</strong> : (N,) ndarray</p>
<blockquote class="last">
<div><p>Simulated signal: <tt class="docutils literal"><span class="pre">S(q,</span> <span class="pre">tau)</span> <span class="pre">=</span> <span class="pre">S_0</span> <span class="pre">e^(-b</span> <span class="pre">g^T</span> <span class="pre">R</span> <span class="pre">D</span> <span class="pre">R.T</span> <span class="pre">g)</span></tt>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r196" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id19">[R196]</a></td><td>M. Descoteaux, &#8220;High Angular Resolution Diffusion MRI: from Local
Estimation to Segmentation and Tractography&#8221;, PhD thesis,
University of Nice-Sophia Antipolis, p. 42, 2008.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r197" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[R197]</a></td><td>E. Stejskal and J. Tanner, &#8220;Spin diffusion measurements: spin echos
in the presence of a time-dependent field gradient&#8221;, Journal of
Chemical Physics, nr. 42, pp. 288&#8211;292, 1965.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="single-tensor-msd">
<h3>single_tensor_msd<a class="headerlink" href="#single-tensor-msd" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.single_tensor_msd">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">single_tensor_msd</tt><big>(</big><em>evals=None</em>, <em>tau=0.025330295910584444</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.single_tensor_msd" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate a Multi-Tensor rtop.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>evals</strong> : 1D arrays,</p>
<blockquote>
<div><p>Eigen-values for the tensor.  By default, values typical for prolate
white matter are used.</p>
</div></blockquote>
<p><strong>tau</strong> : float,</p>
<blockquote>
<div><p>diffusion time. By default the value that makes q=sqrt(b).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>msd</strong> : float,</p>
<blockquote class="last">
<div><p>Mean square displacement.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r198" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id21">[R198]</a></td><td>Cheng J., &#8220;Estimation and Processing of Ensemble Average Propagator and
Its Features in Diffusion MRI&#8221;, PhD Thesis, 2012.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="single-tensor-odf">
<h3>single_tensor_odf<a class="headerlink" href="#single-tensor-odf" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.single_tensor_odf">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">single_tensor_odf</tt><big>(</big><em>r</em>, <em>evals=None</em>, <em>evecs=None</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.single_tensor_odf" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulated ODF with a single tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>r</strong> : (N,3) or (M,N,3) ndarray</p>
<blockquote>
<div><p>Measurement positions in (x, y, z), either as a list or on a grid.</p>
</div></blockquote>
<p><strong>evals</strong> : (3,)</p>
<blockquote>
<div><p>Eigenvalues of diffusion tensor.  By default, use values typical for
prolate white matter.</p>
</div></blockquote>
<p><strong>evecs</strong> : (3, 3) ndarray</p>
<blockquote>
<div><p>Eigenvectors of the tensor.  You can also think of these as the
rotation matrix that determines the orientation of the diffusion
tensor.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ODF</strong> : (N,) ndarray</p>
<blockquote class="last">
<div><p>The diffusion probability at <tt class="docutils literal"><span class="pre">r</span></tt> after time <tt class="docutils literal"><span class="pre">tau</span></tt>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r199" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id22">[R199]</a></td><td>Aganj et al., &#8220;Reconstruction of the Orientation Distribution
Function in Single- and Multiple-Shell q-Ball Imaging Within
Constant Solid Angle&#8221;, Magnetic Resonance in Medicine, nr. 64,
pp. 554&#8211;566, 2010.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="single-tensor-pdf">
<h3>single_tensor_pdf<a class="headerlink" href="#single-tensor-pdf" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.single_tensor_pdf">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">single_tensor_pdf</tt><big>(</big><em>r</em>, <em>evals=None</em>, <em>evecs=None</em>, <em>tau=0.025330295910584444</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.single_tensor_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulated ODF with a single tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>r</strong> : (N,3) or (M,N,3) ndarray</p>
<blockquote>
<div><p>Measurement positions in (x, y, z), either as a list or on a grid.</p>
</div></blockquote>
<p><strong>evals</strong> : (3,)</p>
<blockquote>
<div><p>Eigenvalues of diffusion tensor.  By default, use values typical for
prolate white matter.</p>
</div></blockquote>
<p><strong>evecs</strong> : (3, 3) ndarray</p>
<blockquote>
<div><p>Eigenvectors of the tensor.  You can also think of these as the
rotation matrix that determines the orientation of the diffusion
tensor.</p>
</div></blockquote>
<p><strong>tau</strong> : float,</p>
<blockquote>
<div><p>diffusion time. By default the value that makes q=sqrt(b).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pdf</strong> : (N,) ndarray</p>
<blockquote class="last">
<div><p>The diffusion probability at <tt class="docutils literal"><span class="pre">r</span></tt> after time <tt class="docutils literal"><span class="pre">tau</span></tt>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r200" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id23">[R200]</a></td><td>Cheng J., &#8220;Estimation and Processing of Ensemble Average Propagator and
Its Features in Diffusion MRI&#8221;, PhD Thesis, 2012.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="single-tensor-rtop">
<h3>single_tensor_rtop<a class="headerlink" href="#single-tensor-rtop" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.single_tensor_rtop">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">single_tensor_rtop</tt><big>(</big><em>evals=None</em>, <em>tau=0.025330295910584444</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.single_tensor_rtop" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate a Multi-Tensor rtop.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>evals</strong> : 1D arrays,</p>
<blockquote>
<div><p>Eigen-values for the tensor.  By default, values typical for prolate
white matter are used.</p>
</div></blockquote>
<p><strong>tau</strong> : float,</p>
<blockquote>
<div><p>diffusion time. By default the value that makes q=sqrt(b).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>rtop</strong> : float,</p>
<blockquote class="last">
<div><p>Return to origin probability.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r201" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id24">[R201]</a></td><td>Cheng J., &#8220;Estimation and Processing of Ensemble Average Propagator and
Its Features in Diffusion MRI&#8221;, PhD Thesis, 2012.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="sphere2cart">
<h3>sphere2cart<a class="headerlink" href="#sphere2cart" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.sphere2cart">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">sphere2cart</tt><big>(</big><em>r</em>, <em>theta</em>, <em>phi</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.sphere2cart" title="Permalink to this definition">¶</a></dt>
<dd><p>Spherical to Cartesian coordinates</p>
<p>This is the standard physics convention where <cite>theta</cite> is the
inclination (polar) angle, and <cite>phi</cite> is the azimuth angle.</p>
<p>Imagine a sphere with center (0,0,0).  Orient it with the z axis
running south-north, the y axis running west-east and the x axis
from posterior to anterior.  <cite>theta</cite> (the inclination angle) is the
angle to rotate from the z-axis (the zenith) around the y-axis,
towards the x axis.  Thus the rotation is counter-clockwise from the
point of view of positive y.  <cite>phi</cite> (azimuth) gives the angle of
rotation around the z-axis towards the y axis.  The rotation is
counter-clockwise from the point of view of positive z.</p>
<p>Equivalently, given a point P on the sphere, with coordinates x, y,
z, <cite>theta</cite> is the angle between P and the z-axis, and <cite>phi</cite> is
the angle between the projection of P onto the XY plane, and the X
axis.</p>
<p>Geographical nomenclature designates theta as &#8216;co-latitude&#8217;, and phi
as &#8216;longitude&#8217;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>r</strong> : array_like</p>
<blockquote>
<div><p>radius</p>
</div></blockquote>
<p><strong>theta</strong> : array_like</p>
<blockquote>
<div><p>inclination or polar angle</p>
</div></blockquote>
<p><strong>phi</strong> : array_like</p>
<blockquote>
<div><p>azimuth angle</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>x</strong> : array</p>
<blockquote>
<div><p>x coordinate(s) in Cartesion space</p>
</div></blockquote>
<p><strong>y</strong> : array</p>
<blockquote>
<div><p>y coordinate(s) in Cartesian space</p>
</div></blockquote>
<p><strong>z</strong> : array</p>
<blockquote class="last">
<div><p>z coordinate</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>See these pages:</p>
<ul class="simple">
<li><a class="reference external" href="http://en.wikipedia.org/wiki/Spherical_coordinate_system">http://en.wikipedia.org/wiki/Spherical_coordinate_system</a></li>
<li><a class="reference external" href="http://mathworld.wolfram.com/SphericalCoordinates.html">http://mathworld.wolfram.com/SphericalCoordinates.html</a></li>
</ul>
<p>for excellent discussion of the many different conventions
possible.  Here we use the physics conventions, used in the
wikipedia page.</p>
<p>Derivations of the formulae are simple. Consider a vector x, y, z of
length r (norm of x, y, z).  The inclination angle (theta) can be
found from: cos(theta) == z / r -&gt; z == r * cos(theta).  This gives
the hypotenuse of the projection onto the XY plane, which we will
call Q. Q == r*sin(theta). Now x / Q == cos(phi) -&gt; x == r *
sin(theta) * cos(phi) and so on.</p>
<p>We have deliberately named this function <tt class="docutils literal"><span class="pre">sphere2cart</span></tt> rather than
<tt class="docutils literal"><span class="pre">sph2cart</span></tt> to distinguish it from the Matlab function of that
name, because the Matlab function uses an unusual convention for the
angles that we did not want to replicate.  The Matlab function is
trivial to implement with the formulae given in the Matlab help.</p>
</dd></dl>

</div>
<div class="section" id="sticks-and-ball">
<h3>sticks_and_ball<a class="headerlink" href="#sticks-and-ball" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.sticks_and_ball">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">sticks_and_ball</tt><big>(</big><em>gtab, d=0.0015, S0=100, angles=[(0, 0), (90, 0)], fractions=[35, 35], snr=20</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.sticks_and_ball" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate the signal for a Sticks &amp; Ball model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<blockquote>
<div><p>Signal measurement directions.</p>
</div></blockquote>
<p><strong>d</strong> : float</p>
<blockquote>
<div><p>Diffusivity value.</p>
</div></blockquote>
<p><strong>S0</strong> : float</p>
<blockquote>
<div><p>Unweighted signal value.</p>
</div></blockquote>
<p><strong>angles</strong> : array (K,2) or (K, 3)</p>
<blockquote>
<div><p>List of K polar angles (in degrees) for the sticks or array of K
sticks as unit vectors.</p>
</div></blockquote>
<p><strong>fractions</strong> : float</p>
<blockquote>
<div><p>Percentage of each stick.  Remainder to 100 specifies isotropic
component.</p>
</div></blockquote>
<p><strong>snr</strong> : float</p>
<blockquote>
<div><p>Signal to noise ratio, assuming Rician noise.  If set to None, no
noise is added.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>S</strong> : (N,) ndarray</p>
<blockquote>
<div><p>Simulated signal.</p>
</div></blockquote>
<p><strong>sticks</strong> : (M,3)</p>
<blockquote class="last">
<div><p>Sticks in cartesian coordinates.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r202" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id25">[R202]</a></td><td>Behrens et al., &#8220;Probabilistic diffusion
tractography with multiple fiber orientations:  what can we gain?&#8221;,
Neuroimage, 2007.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id26">
<h3>vec2vec_rotmat<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.sims.voxel.vec2vec_rotmat">
<tt class="descclassname">dipy.sims.voxel.</tt><tt class="descname">vec2vec_rotmat</tt><big>(</big><em>u</em>, <em>v</em><big>)</big><a class="headerlink" href="#dipy.sims.voxel.vec2vec_rotmat" title="Permalink to this definition">¶</a></dt>
<dd><p>rotation matrix from 2 unit vectors</p>
<p>u,v being unit 3d vectors return a 3x3 rotation matrix R than aligns u to v.</p>
<p>In general there are many rotations that will map u to v. If S is any
rotation using v as an axis then R.S will also map u to v since (S.R)u =
S(Ru) = Sv = v.  The rotation R returned by vec2vec_rotmat leaves fixed the
perpendicular to the plane spanned by u and v.</p>
<p>The transpose of R will align v to u.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>u</strong> : array, shape(3,)</p>
<p><strong>v</strong> : array, shape(3,)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>R</strong> : array, shape(3,3)</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.geometry</span> <span class="kn">import</span> <span class="n">vec2vec_rotmat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span><span class="o">=</span><span class="n">vec2vec_rotmat</span><span class="p">(</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">u</span><span class="p">)</span>
<span class="go">array([ 0.,  1.,  0.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
<span class="go">array([ 1.,  0.,  0.])</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dipy.tracking.html" title="tracking"
             >next</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="index.html" >API Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2015, dipy developers &lt;nipy-devel@neuroimaging.scipy.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>