<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dipy &mdash; dipy 0.10.0dev documentation</title>
    
    <link rel="stylesheet" href="../_static/dipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.10.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="dipy 0.10.0dev documentation" href="../index.html" />
    <link rel="up" title="DiPy development" href="index.html" />
    <link rel="next" title="Commit message codes" href="commit_codes.html" />
    <link rel="prev" title="git resources" href="gitwash/git_resources.html" />
  <meta name="keywords" content="dipy, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  <body>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <a href="../index.html">
  <img src="../_static/dipy-banner.png" alt="dipy logo"  border="0" />
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="commit_codes.html" title="Commit message codes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="gitwash/git_resources.html" title="git resources"
             accesskey="P">previous</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">DiPy development</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">

  
<h4> Site Navigation </h4>
  <ul>
    <li><a href="../documentation.html">Documentation</a></li>
    <li><a href="index.html">Development</a></li>
  </ul>

<h4> NIPY Community </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://nipy.org/">Community Home</a></li>
    <li><a class="reference external"
	href="http://nipy.org/software/projects/">NIPY Projects</a></li>
    <li><a class="reference external"
	href="http://mail.scipy.org/mailman/listinfo/nipy-devel">Mailing List</a></li>
    <li><a class="reference external"
	href="http://nipy.org/software/license/index.html">License</a></li>
  </ul>


  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">A guide to making a dipy release</a><ul>
<li><a class="reference internal" href="#release-tools">Release tools</a></li>
<li><a class="reference internal" href="#release-checklist">Release checklist</a></li>
<li><a class="reference internal" href="#doing-the-release">Doing the release</a></li>
<li><a class="reference internal" href="#uploading-binary-builds-for-the-release">Uploading binary builds for the release</a></li>
<li><a class="reference internal" href="#other-stuff-that-needs-doing-for-the-release">Other stuff that needs doing for the release</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="gitwash/git_resources.html"
                        title="previous chapter">git resources</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="commit_codes.html"
                        title="next chapter">Commit message codes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/devel/make_release.txt"
           rel="nofollow">Show Source</a></li>
  </ul>

<div id="searchbox-ml" style="display: none">
  <h3>Search mailing list archive</h3>
  <script type="text/javascript">
    function mlsearch(curobj)
    {
    curobj.q.value="site:mail.scipy.org/pipermail/nipy-devel/ "+curobj.userquery.value
    }
  </script>
  <form action="http://www.google.com/search" method="get" onSubmit="mlsearch(this)">
    <input name="userquery" size="13" type="text" /> <input type="submit" value="Go" />
    <input name="q" type="hidden" />
  </form>
</div>
  
<div id="searchbox-site" style="display: none">
  <h3>Search this site</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="13" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox-ml').show(0);</script>
<script type="text/javascript">$('#searchbox-site').show(0);</script>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="a-guide-to-making-a-dipy-release">
<span id="release-guide"></span><h1>A guide to making a dipy release<a class="headerlink" href="#a-guide-to-making-a-dipy-release" title="Permalink to this headline">¶</a></h1>
<p>A guide for developers who are doing a dipy release</p>
<div class="section" id="release-tools">
<span id="id1"></span><h2>Release tools<a class="headerlink" href="#release-tools" title="Permalink to this headline">¶</a></h2>
<p>There are some release utilities that come with <a class="reference external" href="http://nipy.org/nibabel">nibabel</a>.  nibabel should
install these as the <tt class="docutils literal"><span class="pre">nisext</span></tt> package, and the testing stuff is understandably
in the <tt class="docutils literal"><span class="pre">testers</span></tt> module of that package.  Dipy has Makefile targets for their
use.  The relevant targets are:</p>
<div class="highlight-python"><div class="highlight"><pre>make check-version-info
make check-files
make sdist-tests
</pre></div>
</div>
<p>The first installs the code from a git archive, from the repository, and for
in-place use, and runs the <tt class="docutils literal"><span class="pre">get_info()</span></tt> function to confirm that installation
is working and information parameters are set correctly.</p>
<p>The second (<tt class="docutils literal"><span class="pre">sdist-tests</span></tt>) makes an sdist source distribution archive,
installs it to a temporary directory, and runs the tests of that install.</p>
<p>If you have a version of nibabel trunk past February 11th 2011, there will also
be a functional make target:</p>
<div class="highlight-python"><div class="highlight"><pre>make bdist-egg-tests
</pre></div>
</div>
<p>This builds an egg (which is a zip file), hatches it (unzips the egg) and runs
the tests from the resulting directory.</p>
</div>
<div class="section" id="release-checklist">
<span id="id2"></span><h2>Release checklist<a class="headerlink" href="#release-checklist" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Review the open list of <a class="reference external" href="http://github.com/nipy/dipy/issues">dipy issues</a>.  Check whether there are
outstanding issues that can be closed, and whether there are any issues that
should delay the release.  Label them !</p>
</li>
<li><p class="first">Review and update the release notes.  Review and update the <tt class="file docutils literal"><span class="pre">Changelog</span></tt>
file.  Get a partial list of contributors with something like:</p>
<div class="highlight-python"><div class="highlight"><pre>git shortlog -ns 0.6.0..
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">0.6.0</span></tt> was the last release tag name.</p>
<p>Then manually go over <tt class="docutils literal"><span class="pre">git</span> <span class="pre">shortlog</span> <span class="pre">0.6.0..</span></tt> to make sure the release notes
are as complete as possible and that every contributor was recognized.</p>
</li>
<li><p class="first">Use the opportunity to update the <tt class="docutils literal"><span class="pre">.mailmap</span></tt> file if there are any duplicate
authors listed from <tt class="docutils literal"><span class="pre">git</span> <span class="pre">shortlog</span> <span class="pre">-ns</span></tt>.</p>
</li>
<li><p class="first">Add any new authors to the <tt class="docutils literal"><span class="pre">AUTHORS</span></tt> file.  Add any new entries to the
<tt class="docutils literal"><span class="pre">THANKS</span></tt> file.</p>
</li>
<li><p class="first">Check the copyright years in <tt class="docutils literal"><span class="pre">doc/conf.py</span></tt> and <tt class="docutils literal"><span class="pre">LICENSE</span></tt></p>
</li>
<li><p class="first">Check the examples - we really need an automated check here.</p>
</li>
<li><p class="first">Check the <tt class="docutils literal"><span class="pre">pyx</span></tt> file doctests with:</p>
<div class="highlight-python"><div class="highlight"><pre>./tools/doctest_extmods.py dipy
</pre></div>
</div>
<p>We really need an automated run of these using the buildbots, but we haven&#8217;t
done it yet.</p>
</li>
<li><p class="first">Check the <tt class="docutils literal"><span class="pre">long_description</span></tt> in <tt class="docutils literal"><span class="pre">dipy/info.py</span></tt>.  Check it matches the
<tt class="docutils literal"><span class="pre">README</span></tt> in the root directory, maybe with <tt class="docutils literal"><span class="pre">vim</span></tt> <tt class="docutils literal"><span class="pre">diffthis</span></tt> command.
Check all the links are still valid.</p>
</li>
<li><p class="first">Check all the dipy builds are green on the <a href="#id4"><span class="problematic" id="id5">`nipy buildbot`_</span></a></p>
</li>
<li><p class="first">If you have <a href="#id6"><span class="problematic" id="id7">travis-ci_</span></a> building set up you might want to push the code in its
current state to a branch that will build, e.g:</p>
<div class="highlight-python"><div class="highlight"><pre>git branch -D pre-release-test # in case branch already exists
git co -b pre-release-test
</pre></div>
</div>
</li>
<li><p class="first">Run the builder and review the output from
<a class="reference external" href="http://nipy.bic.berkeley.edu/builders/dipy-release-checks">http://nipy.bic.berkeley.edu/builders/dipy-release-checks</a>   This builder does
<em>not</em> check the outputs - they will likely all be green - you have to check the
<tt class="docutils literal"><span class="pre">stdio</span></tt> output for each step using the web interface.</p>
<p>The <tt class="docutils literal"><span class="pre">dipy-release-checks</span></tt> builder runs these tests:</p>
<div class="highlight-python"><div class="highlight"><pre>make distclean
python -m compileall .
make sdist-tests
make bdist-egg-tests
make check-version-info
make check-files
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">make</span> <span class="pre">bdist-egg-tests</span></tt> may well fail because of a problem with the script
tests; if you have a recent (&gt;= March 31 2013) nibabel <tt class="docutils literal"><span class="pre">nisext</span></tt> package, you
could try instead doing:</p>
<div class="highlight-python"><div class="highlight"><pre>python -c &#39;from nisext.testers import bdist_egg_tests; bdist_egg_tests(&quot;dipy&quot;, label=&quot;not slow and not script_test&quot;)&#39;
</pre></div>
</div>
<p>Eventually we should update the <tt class="docutils literal"><span class="pre">bdist-egg-tests</span></tt> makefile target.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">make</span> <span class="pre">check-version-info</span></tt> checks how the commit hash is stored in the
installed files.  You should see something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>{&#39;sys_version&#39;: &#39;2.6.6 (r266:84374, Aug 31 2010, 11:00:51) \n[GCC 4.0.1 (Apple Inc. build 5493)]&#39;, &#39;commit_source&#39;: &#39;archive substitution&#39;, &#39;np_version&#39;: &#39;1.5.0&#39;, &#39;commit_hash&#39;: &#39;25b4125&#39;, &#39;pkg_path&#39;: &#39;/var/folders/jg/jgfZ12ZXHwGSFKD85xLpLk+++TI/-Tmp-/tmpGPiD3E/pylib/dipy&#39;, &#39;sys_executable&#39;: &#39;/Library/Frameworks/Python.framework/Versions/2.6/Resources/Python.app/Contents/MacOS/Python&#39;, &#39;sys_platform&#39;: &#39;darwin&#39;}
/var/folders/jg/jgfZ12ZXHwGSFKD85xLpLk+++TI/-Tmp-/tmpGPiD3E/pylib/dipy/__init__.pyc
{&#39;sys_version&#39;: &#39;2.6.6 (r266:84374, Aug 31 2010, 11:00:51) \n[GCC 4.0.1 (Apple Inc. build 5493)]&#39;, &#39;commit_source&#39;: &#39;installation&#39;, &#39;np_version&#39;: &#39;1.5.0&#39;, &#39;commit_hash&#39;: &#39;25b4125&#39;, &#39;pkg_path&#39;: &#39;/var/folders/jg/jgfZ12ZXHwGSFKD85xLpLk+++TI/-Tmp-/tmpGPiD3E/pylib/dipy&#39;, &#39;sys_executable&#39;: &#39;/Library/Frameworks/Python.framework/Versions/2.6/Resources/Python.app/Contents/MacOS/Python&#39;, &#39;sys_platform&#39;: &#39;darwin&#39;}
/Users/mb312/dev_trees/dipy/dipy/__init__.pyc
{&#39;sys_version&#39;: &#39;2.6.6 (r266:84374, Aug 31 2010, 11:00:51) \n[GCC 4.0.1 (Apple Inc. build 5493)]&#39;, &#39;commit_source&#39;: &#39;repository&#39;, &#39;np_version&#39;: &#39;1.5.0&#39;, &#39;commit_hash&#39;: &#39;25b4125&#39;, &#39;pkg_path&#39;: &#39;/Users/mb312/dev_trees/dipy/dipy&#39;, &#39;sys_executable&#39;: &#39;/Library/Frameworks/Python.framework/Versions/2.6/Resources/Python.app/Contents/MacOS/Python&#39;, &#39;sys_platform&#39;: &#39;darwin&#39;}
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">make</span> <span class="pre">check-files</span></tt> checks if the source distribution is picking up all the
library and script files.  Look for output at the end about missed files, such
as:</p>
<div class="highlight-python"><div class="highlight"><pre>Missed script files:  /Users/mb312/dev_trees/dipy/bin/nib-dicomfs, /Users/mb312/dev_trees/dipy/bin/nifti1_diagnose.py
</pre></div>
</div>
<p>Fix <tt class="docutils literal"><span class="pre">setup.py</span></tt> to carry across any files that should be in the distribution.</p>
</li>
<li><p class="first">Clean and compile:</p>
<div class="highlight-python"><div class="highlight"><pre>make distclean
git clean -fxd
python setup.py build_ext --inplace
</pre></div>
</div>
</li>
<li><p class="first">Make sure all tests pass on your local machine (from the dipy root directory):</p>
<div class="highlight-python"><div class="highlight"><pre>cd ..
nosetests --with-doctest dipy
cd dipy # back to the root directory
</pre></div>
</div>
</li>
<li><p class="first">Check the documentation doctests:</p>
<div class="highlight-python"><div class="highlight"><pre>cd doc
make doctest
cd ..
</pre></div>
</div>
<p>At the moment this generates lots of errors from the autodoc documentation
running the doctests in the code, where the doctests pass when run in nose -
we should find out why this is at some point, but leave it for now.</p>
</li>
<li><p class="first">Trigger builds of all the binary build testers for dipy, using the web
interface.  You may need permissions set to do this - contact Matthew or
Eleftherios if you do.</p>
<p>At the moment, the useful dipy binary build testers are:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://nipy.bic.berkeley.edu/builders/dipy-bdist32-26">http://nipy.bic.berkeley.edu/builders/dipy-bdist32-26</a></li>
<li><a class="reference external" href="http://nipy.bic.berkeley.edu/builders/dipy-bdist32-27">http://nipy.bic.berkeley.edu/builders/dipy-bdist32-27</a></li>
<li><a class="reference external" href="http://nipy.bic.berkeley.edu/builders/dipy-bdist-mpkg-2.6">http://nipy.bic.berkeley.edu/builders/dipy-bdist-mpkg-2.6</a></li>
<li><a class="reference external" href="http://nipy.bic.berkeley.edu/builders/dipy-bdist-mpkg-2.7">http://nipy.bic.berkeley.edu/builders/dipy-bdist-mpkg-2.7</a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">The release should now be ready.</p>
</li>
</ul>
</div>
<div class="section" id="doing-the-release">
<h2>Doing the release<a class="headerlink" href="#doing-the-release" title="Permalink to this headline">¶</a></h2>
<p>The trick here is to get all the testing, pushing to upstream done <em>before</em> you
do the final release commit.  There should be only one commit with the release
version number, so you might want to make the release commit on your local
machine, push to <a href="#id8"><span class="problematic" id="id9">pypi_</span></a>, review, fix, rebase, until all is good.  Then and only
then do you push to upstream on github.</p>
<ul>
<li><p class="first">Make the release commit.  Edit <tt class="file docutils literal"><span class="pre">dipy/info.py</span></tt> to set <tt class="docutils literal"><span class="pre">_version_extra</span></tt>
to <tt class="docutils literal"><span class="pre">''</span></tt>; commit</p>
</li>
<li><p class="first">Build the release files:</p>
<div class="highlight-python"><div class="highlight"><pre>make distclean
git clean -fxd
make source-release
</pre></div>
</div>
</li>
<li><p class="first">Once everything looks good, upload the source release to PyPi.  See
<a class="reference external" href="http://packages.python.org/an_example_pypi_project/setuptools.html">setuptools intro</a>:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py register
python setup.py sdist --formats=gztar,zip upload
</pre></div>
</div>
</li>
<li><p class="first">Remember you&#8217;ll need your <tt class="docutils literal"><span class="pre">~/.pypirc</span></tt> file set up right for this to work.
See <a class="reference external" href="http://packages.python.org/an_example_pypi_project/setuptools.html">setuptools intro</a>.  The file should look something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>[distutils]
index-servers =
    pypi

[pypi]
username:your.pypi.username
password:your-password

[server-login]
username:your.pypi.username
password:your-password
</pre></div>
</div>
</li>
<li><p class="first">Check how everything looks on pypi - the description, the packages.  If
necessary delete the release and try again if it doesn&#8217;t look right.</p>
</li>
<li><p class="first">Make an annotated tag for the release with tag of form <tt class="docutils literal"><span class="pre">0.6.0</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>git tag -am &#39;Second public release&#39; 0.6.0
</pre></div>
</div>
</li>
<li><p class="first">Set up maintenance / development branches</p>
<p>If this is this is a full release you need to set up two branches, one for
further substantial development (often called &#8216;trunk&#8217;) and another for
maintenance releases.</p>
<ul>
<li><p class="first">Branch to maintenance:</p>
<div class="highlight-python"><div class="highlight"><pre>git co -b maint/0.6.x
</pre></div>
</div>
<p>Set <tt class="docutils literal"><span class="pre">_version_extra</span></tt> back to <tt class="docutils literal"><span class="pre">.dev</span></tt> and bump <tt class="docutils literal"><span class="pre">_version_micro</span></tt> by 1.
Thus the maintenance series will have version numbers like - say - &#8216;0.6.1.dev&#8217;
until the next maintenance release - say &#8216;0.6.1&#8217;.  Commit.</p>
<p>Push with something like <tt class="docutils literal"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">upstream-rw</span> <span class="pre">maint/0.6.x</span> <span class="pre">--set-upstream</span></tt></p>
</li>
<li><p class="first">Start next development series:</p>
<div class="highlight-python"><div class="highlight"><pre>git co main-master
</pre></div>
</div>
<p>then restore <tt class="docutils literal"><span class="pre">.dev</span></tt> to <tt class="docutils literal"><span class="pre">_version_extra</span></tt>, and bump <tt class="docutils literal"><span class="pre">_version_minor</span></tt> by 1.
Thus the development series (&#8216;trunk&#8217;) will have a version number here of
&#8216;0.7.0.dev&#8217; and the next full release will be &#8216;0.7.0&#8217;.</p>
<p>Next merge the maintenace branch with the &#8220;ours&#8221; strategy.  This just labels
the maintenance branch <cite>info.py</cite> edits as seen but discarded, so we can
merge from maintenance in future without getting spurious merge conflicts:</p>
<div class="highlight-python"><div class="highlight"><pre>git merge -s ours maint/0.6.x
</pre></div>
</div>
<p>Push with something like <tt class="docutils literal"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">upstream-rw</span> <span class="pre">main-master:master</span></tt></p>
</li>
</ul>
<p>If this is just a maintenance release from <tt class="docutils literal"><span class="pre">maint/0.6.x</span></tt> or similar, just
tag and set the version number to - say - <tt class="docutils literal"><span class="pre">0.6.2.dev</span></tt>.</p>
</li>
<li><p class="first">Push the tag with <tt class="docutils literal"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">upstream-rw</span> <span class="pre">0.6.0</span></tt></p>
</li>
</ul>
</div>
<div class="section" id="uploading-binary-builds-for-the-release">
<h2>Uploading binary builds for the release<a class="headerlink" href="#uploading-binary-builds-for-the-release" title="Permalink to this headline">¶</a></h2>
<p>By far the easiest way to do this is via the buildbots.</p>
<p>In order to do this, you need first to push the release commit and the release
tag to github, so the buildbots can find the released code and build it.</p>
<ul>
<li><p class="first">In order to trigger the binary builds for the release commit, you need to go
to the web interface for the binary builder, go to the &#8220;Force build&#8221; section,
enter your username and password for the buildbot web service and enter the
commit tag name in the <em>revision</em> field.  For example, if the tag was
<tt class="docutils literal"><span class="pre">0.6.0</span></tt> then you would enter <tt class="docutils literal"><span class="pre">0.6.0</span></tt> in the revision field of the form.
This builds the exact commit labeled by the tag, which is what we want.</p>
</li>
<li><p class="first">Trigger binary builds for Windows from the buildbots. See builders
<tt class="docutils literal"><span class="pre">dipy-bdist32-26</span></tt>, <tt class="docutils literal"><span class="pre">dipy-bdist32-27</span></tt>.  The <tt class="docutils literal"><span class="pre">exe</span></tt> builds will appear in
<a class="reference external" href="http://nipy.bic.berkeley.edu/dipy-dist">http://nipy.bic.berkeley.edu/dipy-dist</a> .  Check that the binary build version
numbers are release numbers (<tt class="docutils literal"><span class="pre">dipy-0.6.0.win32.exe</span></tt> rather than
<tt class="docutils literal"><span class="pre">dipy-0.6.0.dev.win32.exe</span></tt>).</p>
<p>Download the builds and upload to pypi.</p>
<p>You can upload the exe files with the <em>files</em> interface for the new dipy release.
Obviously you&#8217;ll need to log in to do this, and you&#8217;ll need to be an admin for
the dipy pypi project.</p>
<p>For reference, if you need to do binary exe builds by hand, use something
like:</p>
<div class="highlight-python"><div class="highlight"><pre>make distclean
git clean -fxd
c:\Python26\python.exe setup.py bdist_egg upload
c:\Python26\python.exe setup.py bdist_wininst --target-version=2.6 register upload
</pre></div>
</div>
</li>
<li><p class="first">Trigger binary builds for OSX from the buildbots <tt class="docutils literal"><span class="pre">dipy-bdist-mpkg-2.6</span></tt>,
<tt class="docutils literal"><span class="pre">dipy-bdist-mpkg-2.7</span></tt>. <tt class="docutils literal"><span class="pre">egg</span></tt> and <tt class="docutils literal"><span class="pre">mpkg</span></tt> builds will appear in
<a class="reference external" href="http://nipy.bic.berkeley.edu/dipy-dist">http://nipy.bic.berkeley.edu/dipy-dist</a> .  Download the eggs and upload to
pypi.</p>
<p>Upload the dmg files with the <em>files</em> interface for the new dipy release.</p>
</li>
<li><p class="first">Building OSX dmgs from the mpkg builds.</p>
<p>The buildbot binary builders build <tt class="docutils literal"><span class="pre">mpkg</span></tt> directories, which are installers
for OSX.</p>
<p>These need their permissions to be fixed because the installers should install
the files as the root user, group <tt class="docutils literal"><span class="pre">admin</span></tt>.  The all need to be converted to
OSX disk images.  Use the <tt class="docutils literal"><span class="pre">./tools/build_dmgs.py</span></tt>, with something like this
command line:</p>
<div class="highlight-python"><div class="highlight"><pre>./tools/build_dmgs &quot;dipy-dist/dipy-0.6.0-py*.mpkg&quot;
</pre></div>
</div>
<p>For this to work you&#8217;ll need several things:</p>
<blockquote>
<div><ul class="simple">
<li>An account on a OSX box with sudo (Admin user) on which to run the script.</li>
<li>ssh access to the buildbot server <a class="reference external" href="http://nipy.bic.berkeley.edu">http://nipy.bic.berkeley.edu</a> (ask
Matthew or Eleftherios).</li>
<li>a development version of <tt class="docutils literal"><span class="pre">bdist_mpkg</span></tt> installed from
<a class="reference external" href="https://github.com/matthew-brett/bdist_mpkg">https://github.com/matthew-brett/bdist_mpkg</a>.  You need this second for the
script <tt class="docutils literal"><span class="pre">reown_mpkg</span></tt> that fixes the permissions.</li>
</ul>
</div></blockquote>
<p>Upload the dmg files with the <em>files</em> interface for the new dipy release.</p>
</li>
</ul>
</div>
<div class="section" id="other-stuff-that-needs-doing-for-the-release">
<h2>Other stuff that needs doing for the release<a class="headerlink" href="#other-stuff-that-needs-doing-for-the-release" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Checkout the tagged release, and upload the docs:</p>
<div class="highlight-python"><div class="highlight"><pre>make upload-website-mysfusername
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">mysfusername</span></tt> is obviously your own sourceforge username.</p>
<p>You need to checkout the tagged version in order to get the version number
correct for the doc build.  The version number gets picked up from the
<tt class="docutils literal"><span class="pre">info.py</span></tt> version.</p>
</li>
<li><p class="first">Make a tarball for the examples, to allow packagers to bypass the need for
having vtk or pytables or a display on the build machines:</p>
<div class="highlight-python"><div class="highlight"><pre>cd doc
make upload-examples-mysfusername
</pre></div>
</div>
<p>The command requires <a class="reference external" href="http://www.pytables.org">pytables</a> and python vtk on your machine. It writes an
archive named for the dipy version and the docs, e.g:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;dipy root&gt;/dist/dipy-0.6.0.dev-doc-examples.tar.gz
</pre></div>
</div>
<p>and thence writes the archive to the dipy doc directory on sourceforge.</p>
</li>
<li><p class="first">Announce to the mailing lists.  With fear and trembling.</p>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="commit_codes.html" title="Commit message codes"
             >next</a> |</li>
        <li class="right" >
          <a href="gitwash/git_resources.html" title="git resources"
             >previous</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="index.html" >DiPy development</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2015, dipy developers &lt;nipy-devel@neuroimaging.scipy.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>